(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t),n.d(t,"apolloClient",(function(){return tt}));var a,c,s,r,i,l,u,o,j,d,b,m,h,O,g,p,x,f,v,S,C,y,k,$,N,D,I=n(2),w=n.n(I),_=n(72),F=n.n(_),q=n(27),L=(n(82),n(5)),U=(n(20),n(6)),E=w.a.createContext({user:null,refreshUser:function(){},toggleNavBar:function(){}}),P=n(12),R=Object(U.gql)(a||(a=Object(P.a)(["\n  query getUserID($username:String, $password:String){\n    getUserID(username:$username, password:$password)\n  }\n"]))),M=Object(U.gql)(c||(c=Object(P.a)(["\n  query getUserByID($id: String){\n    user(id: $id){\n      _id\n      name\n      username\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n      characters{\n        _id\n        name\n        campaign\n      }\n    }\n  }\n"]))),A=Object(U.gql)(s||(s=Object(P.a)(["\n  mutation addUser($name:String, $username:String, $password:String){\n    addUser(name:$name, username:$username, password:$password){\n      name\n    }\n  }\n"]))),Q=(Object(U.gql)(r||(r=Object(P.a)(["\n  subscription currentUser($id:String){\n    updateUser(id:$id){\n      _id\n      name\n      permissions\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n    }\n  }\n"]))),Object(U.gql)(i||(i=Object(P.a)(["\n  query getCampaignID($name:String){\n    campaign(name:$name){\n      _id\n    }\n  }\n"]))),Object(U.gql)(l||(l=Object(P.a)(["\n  query getCampaign($id:String){\n    campaign(id:$id){\n      name\n      dm\n      characters{\n        name\n        user{\n          _id\n          name\n          username\n        }\n      }\n    }\n  }\n"])))),B=Object(U.gql)(u||(u=Object(P.a)(["\n  mutation addCampaign($dm:String, $name:String){\n    addCampaign(dm:$dm, name:$name){\n      _id\n    }\n  }\n"]))),T=Object(U.gql)(o||(o=Object(P.a)(["\n  mutation joinExistingCampaign($id:String, $user:String){\n      joinCampaign(id:$id, user:$user){\n        name\n      }\n  }\n"]))),J=Object(U.gql)(j||(j=Object(P.a)(["\n  mutation leaveCampaign($campaign:String, $user:String){\n      leaveCampaign(campaign:$campaign, user:$user){\n        name\n      }\n  }\n"]))),G=Object(U.gql)(d||(d=Object(P.a)(["\n  mutation deleteCampaign($user:String, $dm:String, $campaign:String){\n    deleteCampaign(user:$user, dm:$dm, campaign:$campaign)\n  }\n"]))),H=Object(U.gql)(b||(b=Object(P.a)(["\n  mutation renameCampaign($id:String, $name:String){\n    renameCampaign(id:$id, name:$name){\n      name\n    }\n  }\n"]))),z=Object(U.gql)(m||(m=Object(P.a)(["\n  query getCharacter($id:String){\n    character(id:$id){\n      _id\n      user{\n        _id\n      }\n      campaign\n      name\n      race\n      background\n      class\n      level\n      hp\n      cha\n      con\n      dex\n      int\n      str\n      wis\n      skills\n    }\n  }\n"]))),V=Object(U.gql)(h||(h=Object(P.a)(["\n  mutation addCharacter($user:String, $campaign:String, $name:String, $race:String, $background:String){\n    addCharacter(user:$user, campaign:$campaign, name:$name, race:$race, background:$background){\n      _id\n      name\n    }\n  }\n"]))),W=Object(U.gql)(O||(O=Object(P.a)(["\n  mutation updateCharacterInfo($id:String, $name:String, $campaign:String){\n    updateCharacterInfo(id:$id, name:$name, campaign:$campaign){\n      _id\n      name\n    }\n  }\n"]))),Y=Object(U.gql)(g||(g=Object(P.a)(["\n  mutation updateCharacterStats($id:String, $class:String, $cha:Int, $con:Int, $dex:Int, $int:Int, $str:Int, $wis:Int){\n    updateCharacterStats(id:$id, class:$class, cha:$cha, con:$con, dex:$dex, int:$int, str:$str, wis:$wis){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),K=Object(U.gql)(p||(p=Object(P.a)(["\n  mutation updateCharacterSkills($id:String, $skills:[String]){\n    updateCharacterSkills(id:$id, skills:$skills){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),X=Object(U.gql)(x||(x=Object(P.a)(["\n  mutation deleteCharacter($user:String, $campaign:String, $character:String){\n    deleteCharacter(user:$user, campaign:$campaign, character:$character)\n  }\n"]))),Z=Object(U.gql)(f||(f=Object(P.a)(["\n  query getClasses{\n    classes{\n      index\n      name\n    }\n  }\n"]))),ee=Object(U.gql)(v||(v=Object(P.a)(["\n  query getClass($index:String){\n    class(index:$index){\n      index\n      name\n      proficiencies{\n        index\n        name\n      }\n      proficiency_choices{\n        choose\n        from{\n          index\n          name\n          type\n          races{\n            index\n          }\n        }\n      }\n      starting_equipment_options{\n        choose\n        from{\n          equipment{\n            index\n            name\n            damage{\n              damage_dice\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),te=Object(U.gql)(S||(S=Object(P.a)(["\n  query getRaces{\n    races{\n      index\n      name\n      speed\n      age\n      alignment\n      size_description\n      language_desc\n    }\n  }\n"]))),ne=(Object(U.gql)(C||(C=Object(P.a)(["\n  query currentSessionID($campaign:String){\n    getCurrentSessionID(campaign:$campaign)\n  }\n"]))),Object(U.gql)(y||(y=Object(P.a)(["\n  mutation createSession($campaign:String, $user:String){\n    createSession(campaign:$campaign, user:$user){\n      _id\n    }\n  }\n"])))),ae=Object(U.gql)(k||(k=Object(P.a)(["\n  mutation endSession($campaign:String, $user:String){\n    endSession(campaign:$campaign, user:$user)\n  }\n"]))),ce=Object(U.gql)($||($=Object(P.a)(["\n  mutation changeCharacterHealth($session:String, $character:String, $hp:Int){\n    changeCharacterHealth(session:$session, character:$character, hp:$hp)\n  }\n"]))),se=Object(U.gql)(N||(N=Object(P.a)(["\n  query currentSession($id:String){\n    session(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user{\n            _id\n          }\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),re=Object(U.gql)(D||(D=Object(P.a)(["\n  subscription onSessionUpdate($id:String){\n    sessionUpdate(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user{\n            _id\n          }\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),ie=n(0);function le(e){window.location.pathname;var t=Object(I.useState)(!1),n=Object(L.a)(t,2),a=n[0],c=n[1],s=Object(I.useState)("D"),r=Object(L.a)(s,2),i=r[0],l=r[1],u=document.querySelector(":root").style,o=Object(ie.jsx)("button",{onClick:function(){a?(u.setProperty("--primaryColour","#e6e6e6"),u.setProperty("--secondaryColour","#6e6e6e"),u.setProperty("--navTextColour","#e6e6e6"),c(!1),l("D")):(u.setProperty("--primaryColour","#6e6e6e"),u.setProperty("--secondaryColour","#e6e6e6"),u.setProperty("--navTextColour","#6e6e6e"),c(!0),l("N"))},children:i}),j=[Object(ie.jsx)(q.b,{to:"/",className:"navLink-home",children:Object(ie.jsx)("h3",{children:" DND20 "})}),Object(ie.jsx)(q.b,{to:"/Campaigns",className:"navLink",children:Object(ie.jsx)("p",{children:" Campaigns "})}),Object(ie.jsx)(q.b,{to:"/Characters",className:"navLink",children:Object(ie.jsx)("p",{children:" Characters "})}),Object(ie.jsx)(q.b,{to:"/Play",className:"navLink",children:Object(ie.jsx)("p",{children:" Play "})}),Object(ie.jsx)(q.b,{to:"/MyAccount",className:"navLink",children:Object(ie.jsx)("p",{children:" My Account "})}),o];return Object(ie.jsx)("nav",{className:"navbar",children:j})}var ue=n(13);var oe=function(){var e=Object(I.useContext)(E).user,t=Object(I.useState)("Next"),n=Object(L.a)(t,2),a=n[0],c=n[1];return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("br",{}),Object(ie.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(ie.jsx)("br",{}),Object(ie.jsx)("h1",{className:"title",children:"DnD20"}),Object(ie.jsx)("button",{name:"showname",onClick:function(){c(e?e.name:"no user")},children:a}),Object(ie.jsx)("p",{children:"welcome to the app, gamer"})]})},je=n(34),de=n(35),be=n(14),me=n(37),he=n(36),Oe=function(e){Object(me.a)(n,e);var t=Object(he.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).campaignID=a.props.campaignID,a.handleNameChange=a.handleNameChange.bind(Object(be.a)(a)),a.submit=a.submit.bind(Object(be.a)(a)),a.delete=a.delete.bind(Object(be.a)(a)),a.submitted=a.submitted.bind(Object(be.a)(a)),a.returnCampaign=a.returnCampaign.bind(Object(be.a)(a)),a.toggleID=a.toggleID.bind(Object(be.a)(a)),a.state={submit:!1,delete:!1,loaded:!1,campaign:null,name:"",showID:!1},a}return Object(de.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"submit",value:function(e){this.setState({submit:!0}),this.props.submit(e)}},{key:"delete",value:function(){this.setState({delete:!0})}},{key:"submitted",value:function(){var e=this;this.setState({submit:!1,delete:!1},(function(){e.props.back()}))}},{key:"returnCampaign",value:function(e){this.setState({campaign:e,name:e.name,loaded:!0})}},{key:"toggleID",value:function(){this.setState({showID:!this.state.showID})}},{key:"render",value:function(){if(null!=this.campaignID){var e=!1;return null!==this.state.campaign&&(e=this.props.currentUserID===this.state.campaign.dm,null!==this.state.campaign.session),Object(ie.jsxs)(ie.Fragment,{children:[!this.state.loaded&&!this.state.submit&&Object(ie.jsx)("div",{children:Object(ie.jsx)(ge,{ID:this.campaignID,return:this.returnCampaign})}),e&&Object(ie.jsx)(ie.Fragment,{children:this.state.loaded&&!this.state.submit&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(ie.jsx)("h1",{className:"title",children:"Edit Campaign"}),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(ve,{ID:this.campaignID}),Object(ie.jsx)("br",{})]}),this.state.showID?Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("p",{children:[this.campaignID,Object(ie.jsx)("button",{onClick:this.toggleID,children:"x"})]})}):Object(ie.jsx)("button",{onClick:this.toggleID,children:"Show ID"}),Object(ie.jsx)("button",{onClick:this.delete,children:"Delete this campaign"}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("form",{className:"Form",onSubmit:this.submit,children:[Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(ie.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(ie.jsx)("br",{})]}),Object(ie.jsx)("input",{type:"submit",value:"Submit"})]}),Object(ie.jsx)("br",{})]})}),!e&&Object(ie.jsx)(fe,{ID:this.campaignID,back:this.props.back}),this.state.submit&&Object(ie.jsx)(pe,{submitted:this.submitted,id:this.campaignID,name:this.state.name}),this.state.delete&&Object(ie.jsx)(xe,{submitted:this.submitted,dm:this.state.campaign.dm,campaignID:this.campaignID}),Object(ie.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("p",{children:"Error: No Campaign"}),Object(ie.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}}]),n}(w.a.Component);function ge(e){for(var t=Object(U.useQuery)(Q,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error;n;)return Object(ie.jsx)("p",{children:"loading..."});return c?(console.log(c),Object(ie.jsx)("p",{})):(e.return(a.campaign),Object(ie.jsx)("p",{children:"done"}))}function pe(e){for(var t=Object(U.useMutation)(H),n=Object(L.a)(t,2),a=n[0],c=n[1],s=c.data,r=c.loading;r;)return Object(ie.jsx)("p",{children:"loading"});return void 0===s?a({variables:{id:e.id,name:e.name}}):(console.log(s),e.submitted()),null}function xe(e){for(var t=Object(I.useContext)(E).user,n=Object(U.useMutation)(G),a=Object(L.a)(n,2),c=a[0],s=a[1],r=s.data,i=s.loading;i;)return Object(ie.jsx)("p",{children:"Loading..."});return void 0===r?(c({variables:{user:t._id,dm:e.dm,campaign:e.campaignID}}),console.log("attempted deleteCampaign")):null!=r&&(console.log("done",r),e.submitted()),null}function fe(e){for(var t=Object(I.useContext)(E).user,n=Object(U.useMutation)(J),a=Object(L.a)(n,2),c=a[0],s=a[1],r=(s.data,s.loading);r;)return Object(ie.jsx)("p",{children:"Loading..."});return Object(ie.jsx)("button",{onClick:function(){c({variables:{user:t._id,campaign:e.ID}}),e.back()},children:"Leave Campaign"})}function ve(e){var t=Object(I.useContext)(E).user,n=Object(U.useQuery)(Q,{variables:{id:e.ID},notifyOnNetworkStatusChange:"true"}),a=n.data,c=n.loading,s=n.refetch,r=Object(U.useMutation)(J),i=Object(L.a)(r,2),l=i[0],u=i[1],o=(u.data,u.loading),j=Object(I.useState)([]),d=Object(L.a)(j,2),b=d[0],m=d[1];return Object(I.useState)((function(){(c||o)&&console.log("loading"),void 0!==a&&!1===c&&null!==a&&(console.log(a.campaign),null===a.campaign?s():m(a.campaign.characters.map((function(n,a){return n.user._id!==t._id?Object(ie.jsxs)("button",{onClick:function(){l({variables:{user:n.user._id,campaign:e.ID}}),s()},children:["Remove ",n.user.name]}):null}))))}),[a,c]),Object(ie.jsx)(ie.Fragment,{children:b})}function Se(e){var t=Object(I.useContext)(E),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=n.campaigns.map((function(t,a){return Object(ie.jsx)(Ce,{campaign:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n._id},a)}));return Object(ie.jsxs)(ie.Fragment,{children:[0===n.campaigns.length&&Object(ie.jsx)("p",{children:"You are not currently participating in any campaigns."}),0!==n.campaigns.length&&c]})}function Ce(e){return Object(ie.jsxs)("div",{className:"campaign",children:[Object(ie.jsx)("p",{className:"campaign-name",children:e.campaign.name},"c1"),Object(ie.jsx)("ul",{children:Object(ie.jsx)("li",{children:"Edit"===e.purpose&&Object(ie.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign._id)},children:"Edit"})},"editButton")})]})}function ye(e){var t=Object(I.useContext)(E).user,n=Object(I.useState)(null),a=Object(L.a)(n,2),c=a[0],s=a[1],r=Object(I.useState)(!1),i=Object(L.a)(r,2),l=i[0],u=i[1],o=Object(I.useState)(!1),j=Object(L.a)(o,2),d=j[0],b=j[1],m=Object(I.useState)(""),h=Object(L.a)(m,2),O=h[0],g=h[1],p=Object(I.useState)(!1),x=Object(L.a)(p,2),f=x[0],v=x[1],S=Object(I.useState)(!1),C=Object(L.a)(S,2),y=C[0],k=C[1],$=Object(I.useState)(!1),N=Object(L.a)($,2),D=N[0],w=N[1],_=Object(I.useState)(""),F=Object(L.a)(_,2),q=F[0],P=F[1],R=Object(I.useState)(!1),M=Object(L.a)(R,2),A=M[0],Q=M[1],J=Object(U.useMutation)(B),G=Object(L.a)(J,2),H=G[0],z=G[1],V=z.data,W=z.loading,Y=Object(U.useMutation)(T),K=Object(L.a)(Y,2),X=K[0],Z=K[1],ee=Z.data,te=Z.loading;return Object(I.useEffect)((function(){d&&f&&!W&&void 0===V&&H({variables:{dm:t._id,name:O}}),void 0!==V&&(b(!1),v(!1),u(!0),s(V.addCampaign._id))}),[V,W,H,O,f,t._id,d]),Object(I.useEffect)((function(){D&&A&&!te&&void 0===ee&&X({variables:{id:q,user:t._id}}),void 0!==ee&&(w(!1),Q(!1),u(!0),s(ee.joinCampaign._id))}),[X,ee,te,q,A,t._id,D]),Object(ie.jsxs)(ie.Fragment,{children:[!l&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("h1",{className:"title",children:" Campaigns "}),!D&&Object(ie.jsx)("button",{onClick:function(){w(!D)},children:"Join Campaign"}),D&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("input",{type:"campaign",onChange:function(e){e.preventDefault(),P(e.target.value)},value:q}),Object(ie.jsx)("button",{onClick:function(){Q(!A)},children:"Join"}),Object(ie.jsx)("button",{onClick:function(){w(!D)},children:"x"})]}),!d&&!f&&Object(ie.jsx)("button",{onClick:function(){b(!d)},children:"+"}),d&&!f&&Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("form",{className:"Form",onSubmit:function(e){e.preventDefault(),v(!f)},children:[Object(ie.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(ie.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),g(e.target.value)},value:O})]}),Object(ie.jsx)("input",{type:"submit",value:"Submit"}),Object(ie.jsx)("button",{onClick:function(){b(!d)},children:"x"})]})}),Object(ie.jsx)("br",{}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Se,{needsRefresh:y,refreshed:function(){k(!1)},changeSelected:function(e){s(e),u(!0)},purpose:"Edit"})]}),l&&Object(ie.jsx)(Oe,{currentUserID:t._id,campaignID:c,submit:function(){},back:function(){s(null),u(!1),k(!0)}})]})}function ke(e,t){var n=[];if(void 0!==e[0])if(void 0!==e[0].index)for(var a=0;a<e.length;a++)n.push(Object(ie.jsx)("option",{value:e[a].index,children:e[a].name},a));else if(void 0!==e[0]._id)for(var c=0;c<e.length;c++)n.push(Object(ie.jsx)("option",{value:e[c]._id,children:e[c].name},c));return n}function $e(e){return 0<=Ne(e)&&Ne(e)<=25}function Ne(e){var t=25;return e.map((function(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:t-=e-8;break;case 15:t-=8;break;case 16:t-=10;break;case 17:t-=13;break;case 18:t-=18;break;default:t-=100}})),t}function De(e){var t=e.currentUser,n=Object(I.useState)(null),a=Object(L.a)(n,2),c=a[0],s=a[1],r=Object(U.useQuery)(z,{variables:{id:e.characterID},fetchPolicy:"network-only"}),i=r.loading,l=r.data,u=r.refetch;for(Object(I.useEffect)((function(){if(!1===i&&void 0!==l&&s(l.character),i)return Object(ie.jsx)("p",{children:"Loading.."})}),[l,i,e.characterID]);i;)return Object(ie.jsx)("p",{children:"Loading..."});return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("button",{className:"backButton",onClick:e.back,children:"Back"}),!1===i&&(null!==c?Object(ie.jsx)(we,{user:t,character:c,reload:u,back:e.back}):Object(ie.jsx)(Ie,{user:t,back:e.back}))]})}function Ie(e){var t=Object(I.useState)(""),n=Object(L.a)(t,2),a=n[0],c=n[1],s=Object(I.useState)(""),r=Object(L.a)(s,2),i=r[0],l=r[1],u=Object(I.useState)(""),o=Object(L.a)(u,2),j=o[0],d=o[1],b=Object(I.useState)(""),m=Object(L.a)(b,2),h=m[0],O=m[1],g=Object(U.useQuery)(te),p=g.loading,x=g.data,f=Object(U.useMutation)(V),v=Object(L.a)(f,2),S=v[0],C=v[1],y=C.loading,k=C.data;for(Object(I.useEffect)((function(){void 0!==e.user.campaigns[0]&&O(e.user.campaigns[0]._id),void 0!==x&&void 0!==x.races[0]&&d(x.races[0].index)}),[x,e.user.campaigns]);p||y;)return Object(ie.jsx)("p",{children:"Loading..."});return void 0!==k&&e.back(),Object(ie.jsxs)("form",{onSubmit:function(){console.log(e.user._id,h,a,j,i),S({variables:{user:e.user._id,campaign:h,name:a,race:j,background:i}})},children:[Object(ie.jsx)("input",{type:"submit"}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(ie.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),c(e.target.value)},value:a})]}),Object(ie.jsx)(Ee,{id:"campaign",campaigns:e.user.campaigns,changeCampaign:O}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"bg",className:"tbLabel",children:["Background Info / Lore:",Object(ie.jsx)("textarea",{id:"bg",name:"bg",onChange:function(e){e.preventDefault(),l(e.target.value)},value:i,rows:"4",cols:"50",maxLength:"500"})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Ue,{id:"race",races:x.races,changeRace:d}),Object(ie.jsx)("br",{})]})}function we(e){for(var t=Object(U.useQuery)(Z),n=t.loading,a=t.data,c=Object(I.useState)(0),s=Object(L.a)(c,2),r=s[0],i=s[1];n;)return Object(ie.jsx)("p",{children:"Loading..."});var l=Object(ie.jsxs)(ie.Fragment,{children:[[0===r&&Object(ie.jsx)(_e,{character:e.character,classes:a.classes,back:e.back}),1===r&&Object(ie.jsx)(Fe,{reload:e.reload,character:e.character})],Object(ie.jsxs)("p",{className:"Form",children:["Page:",Object(ie.jsx)("button",{onClick:function(){i(0)},children:"1"}),Object(ie.jsx)("button",{onClick:function(){i(1)},children:"2"})]})]});return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h2",{children:e.character.name}),Object(ie.jsx)("div",{className:"Form",children:l})]})}function _e(e){var t=Object(I.useContext)(E).user,n=e.character,a=Object(I.useState)(n.campaign),c=Object(L.a)(a,2),s=c[0],r=c[1],i=Object(I.useState)(n.class),l=Object(L.a)(i,2),u=l[0],o=l[1],j=Object(I.useState)(n.str),d=Object(L.a)(j,2),b=d[0],m=d[1],h=Object(I.useState)(n.dex),O=Object(L.a)(h,2),g=O[0],p=O[1],x=Object(I.useState)(n.con),f=Object(L.a)(x,2),v=f[0],S=f[1],C=Object(I.useState)(n.int),y=Object(L.a)(C,2),k=y[0],$=y[1],N=Object(I.useState)(n.wis),D=Object(L.a)(N,2),w=D[0],_=D[1],F=Object(I.useState)(n.cha),q=Object(L.a)(F,2),P=q[0],R=q[1],M=Object(I.useState)(!1),A=Object(L.a)(M,2),Q=A[0],B=A[1],T=Object(I.useState)(n.name),J=Object(L.a)(T,2),G=J[0],H=J[1],z=Object(U.useMutation)(X,{variables:{character:n._id,user:n.user._id,campaign:n.campaign}}),V=Object(L.a)(z,2),K=V[0],Z=V[1],ee=Z.loading,te=Z.data,ne=Object(U.useMutation)(W,{variables:{id:n._id,name:G,campaign:s}}),ae=Object(L.a)(ne,2),ce=ae[0],se=ae[1],re=se.loading,le=se.data,ue=Object(U.useMutation)(Y,{variables:{id:n._id,class:u,cha:parseInt(P),con:parseInt(v),str:parseInt(b),dex:parseInt(g),int:parseInt(k),wis:parseInt(w)}}),oe=Object(L.a)(ue,2),je=oe[0],de=oe[1],be=de.loading,me=de.data,he=Object(I.useState)(!1),Oe=Object(L.a)(he,2),ge=Oe[0],pe=Oe[1],xe=[b,g,v,k,w,P],fe=Object(I.useState)(Ne(xe)),ve=Object(L.a)(fe,2),Se=ve[0],Ce=ve[1];for(Object(I.useEffect)((function(){void 0!==e.classes[0]&&o(e.classes[0].index)}),[e.classes]);ee||re||be;)return ee&&console.log(n._id,n.user._id,n.campaign),Object(ie.jsx)("p",{children:"loading"});return void 0===te&&void 0===le&&void 0===me||e.back(),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{onClick:K,children:"Delete Character"})}),Q?Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("form",{onSubmit:ce,children:[Object(ie.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(ie.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),H(e.target.value)},value:G})]}),Object(ie.jsx)(Ee,{id:"campaign",current:s,campaigns:t.campaigns,changeCampaign:r}),Object(ie.jsx)("input",{type:"submit"}),Object(ie.jsx)("button",{onClick:function(){B(!Q)},children:"Cancel"})]})}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("button",{onClick:function(){B(!Q)},children:"Rename/ChangeCampaign"}),Object(ie.jsx)("br",{})]}),Object(ie.jsxs)("form",{className:"Form",onSubmit:function(){$e([b,g,v,k,w,P])?(je(),pe(!1)):pe(!0)},children:[Object(ie.jsx)("input",{type:"submit"}),Object(ie.jsx)("br",{}),Object(ie.jsx)(Le,{id:"class",current:u,classes:e.classes,changeClass:o}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"str",className:"tbLabel",children:["Str:",Object(ie.jsx)("input",{type:"number",id:"str",name:"str",min:"1",max:"20",required:!0,onChange:function(e){var t=[b+(Number.parseInt(e.target.value)-b),g,v,k,w,P];e.preventDefault(),$e(t)?(m(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=b},value:b})]}),Object(ie.jsxs)("label",{htmlFor:"dex",className:"tbLabel",children:["Dex:",Object(ie.jsx)("input",{type:"number",id:"dex",name:"dex",min:"1",max:"20",required:!0,onChange:function(e){var t=[b,g+(Number.parseInt(e.target.value)-g),v,k,w,P];e.preventDefault(),$e(t)?(p(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=g},value:g})]}),Object(ie.jsxs)("label",{htmlFor:"con",className:"tbLabel",children:["Con:",Object(ie.jsx)("input",{type:"number",id:"con",name:"con",min:"1",max:"20",required:!0,onChange:function(e){var t=[b,g,v+(Number.parseInt(e.target.value)-v),k,w,P];e.preventDefault(),$e(t)?(S(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=v},value:v})]}),Object(ie.jsxs)("label",{htmlFor:"int",className:"tbLabel",children:["Int:",Object(ie.jsx)("input",{type:"number",id:"int",name:"int",min:"1",max:"20",required:!0,onChange:function(e){var t=[b,g,v,k+(Number.parseInt(e.target.value)-k),w,P];e.preventDefault(),$e(t)?($(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=k},value:k})]}),Object(ie.jsxs)("label",{htmlFor:"wis",className:"tbLabel",children:["Wis:",Object(ie.jsx)("input",{type:"number",id:"wis",name:"wis",min:"1",max:"20",required:!0,onChange:function(e){var t=[b,g,v,k,w+(Number.parseInt(e.target.value)-w),P];e.preventDefault(),$e(t)?(_(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=w},value:w})]}),Object(ie.jsxs)("label",{htmlFor:"cha",className:"tbLabel",children:["Cha:",Object(ie.jsx)("input",{type:"number",id:"cha",name:"cha",min:"1",max:"20",required:!0,onChange:function(e){var t=[b,g,v,k,w,P+(Number.parseInt(e.target.value)-P)];e.preventDefault(),$e(t)?(R(Number.parseInt(e.target.value)),Ce(Ne(t))):e.target.innerText=P},value:P})]}),Object(ie.jsxs)("p",{children:[Se," points remaining"]})]}),ge&&Object(ie.jsx)("p",{children:"bad stats"})]})}function Fe(e){console.log(e.character.skills);var t=Object(U.useQuery)(ee,{variables:{index:e.character.class}}),n=t.data,a=t.loading,c=Object(I.useState)([]),s=Object(L.a)(c,2),r=s[0],i=s[1],l=Object(I.useState)([]),u=Object(L.a)(l,2),o=u[0],j=u[1],d=Object(I.useState)(!1),b=Object(L.a)(d,2),m=b[0],h=b[1];for(Object(I.useEffect)((function(){null!==n&&void 0!==n&&!1===a&&!1===m&&(i(n.class.proficiencies.map((function(e){return e.name}))),j(n.class.proficiency_choices.map((function(t,a){return Object(ie.jsx)(qe,{defaults:n.class.proficiencies.map((function(e){return e.index})),character:e.character,options:n.class.proficiency_choices[a],reload:e.reload})}))),h(!0))}),[n,a,e,e.character,e.classes,m]);a;)return Object(ie.jsx)("p",{children:"Loading data..."});return Object(ie.jsxs)(ie.Fragment,{children:[o,Object(ie.jsx)("p",{children:r})]})}function qe(e){var t=Object(I.useState)(e.options.from.map((function(t,n){return e.character.skills.includes(t.index)?t.index:null}))),n=Object(L.a)(t,2),a=n[0],c=n[1],s=Object(I.useState)(a.filter((function(e){return null!==e})).length),r=Object(L.a)(s,2),i=r[0],l=r[1],u=Object(U.useMutation)(K,{variables:{id:e.character._id,skills:Array.prototype.concat(e.defaults,a.filter((function(e){return null!==e})))}}),o=Object(L.a)(u,2),j=o[0],d=(o[1].data,e.options.from.map((function(t,n){return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("input",{type:"checkbox",defaultChecked:e.character.skills.includes(t.index),name:n,id:t.index,onChange:function(t){!function(t){var n=[],s=i;t.checked?i+1<=e.options.choose?(s++,n=a.map((function(e,n){return n===Number.parseInt(t.name)?t.id:e}))):(t.checked=!1,n=a):(s--,n=a.map((function(e,n){return n===Number.parseInt(t.name)?null:e})));c(n),l(s)}(t.target)}}),Object(ie.jsx)("label",{for:n,children:t.name})]})})));return"Skills"===e.options.from[0].type&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("p",{children:["Choose ",e.options.choose,":"]}),Object(ie.jsxs)("form",{onSubmit:function(t){t.preventDefault(),j(),e.reload()},children:[d,Object(ie.jsx)("input",{type:"submit"})]})]})}function Le(e){var t=ke(e.classes);return Object(ie.jsxs)("label",{htmlFor:"class",className:"tbLabel",children:["Class:",Object(ie.jsx)("select",{id:"classes",required:!0,name:"classes",onChange:function(t){e.changeClass(e.classes[t.target.selectedIndex].index)},defaultValue:e.current,children:t})]})}function Ue(e){var t=Object(I.useState)(0),n=Object(L.a)(t,2),a=n[0],c=n[1],s=ke(e.races);return Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("label",{htmlFor:"races",required:!0,className:"tbLabel",children:["Race:",Object(ie.jsx)("select",{id:"races",name:"races",selectedIndex:"0",onChange:function(t){e.changeRace(e.races[t.target.selectedIndex].index),c(t.target.selectedIndex)},children:s})]}),Object(ie.jsx)("p",{children:e.races[a].alignment})]})}function Ee(e){var t=ke(e.campaigns);return 1===e.campaigns.length&&e.changeCampaign(e.campaigns[0]._id),Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("label",{htmlFor:"campaigns",className:"tbLabel",children:["Campaign:",Object(ie.jsx)("select",{id:"campaigns",name:"campaigns",selectedIndex:"0",required:!0,onChange:function(t){e.changeCampaign(e.campaigns[t.target.selectedIndex]._id)},defaultValue:e.current,children:t})]})})}function Pe(e){var t=Object(I.useContext)(E),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=Object(U.useMutation)(ne),s=Object(L.a)(c,2),r=s[0],i=(s[1].data,Object(U.useMutation)(ae)),l=Object(L.a)(i,2),u=l[0],o=(l[1].data,n),j=o.characters.map((function(t,a){var c=o.campaigns.find((function(e){return e._id===t.campaign}));return Object(ie.jsx)(Re,{character:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n,campaign:c},a)}));return"Play"===e.purpose&&j.push(o.campaigns.map((function(e){return Object(ie.jsxs)(ie.Fragment,{children:[n._id===e.dm&&null===e.currentSession&&Object(ie.jsxs)("button",{onClick:function(){return r({variables:{campaign:e._id,user:n._id}})},children:["Begin ",e.name]}),n._id===e.dm&&null!==e.currentSession&&Object(ie.jsxs)("button",{onClick:function(){return u({variables:{campaign:e._id,user:n._id}})},children:["End ",e.name," session"]})]})}))),Object(ie.jsxs)("div",{children:["Play"===e.purpose&&Object(ie.jsx)("button",{onClick:function(){a()},children:"Refresh"}),0===n.characters.length&&Object(ie.jsx)("p",{children:"You do not currently have any characters."}),0!==n.campaigns.length&&j]})}function Re(e){return console.log(e.campaign),Object(ie.jsxs)("div",{className:"character",children:[Object(ie.jsx)("p",{className:"character-name",children:e.character.name},"c1"),Object(ie.jsx)("ul",{children:Object(ie.jsxs)("li",{children:["Edit"===e.purpose&&Object(ie.jsx)("button",{onClick:function(){return e.changeSelected(e.character._id)},children:"Edit"}),"Play"===e.purpose&&void 0!==e.campaign&&null!==e.campaign.currentSession&&Object(ie.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign.currentSession)},children:"Play"})]},"mainButton")})]})}var Me=function(e){Object(me.a)(n,e);var t=Object(he.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).state={selected:null,chosen:!1,needsRefresh:!1,needsSubmit:!1},a.handleEditSubmit=a.handleEditSubmit.bind(Object(be.a)(a)),a.changeSelected=a.changeSelected.bind(Object(be.a)(a)),a.clearSelected=a.clearSelected.bind(Object(be.a)(a)),a.wantsNew=a.wantsNew.bind(Object(be.a)(a)),a.refreshed=a.refreshed.bind(Object(be.a)(a)),a}return Object(de.a)(n,[{key:"handleEditSubmit",value:function(e){e.preventDefault()}},{key:"changeSelected",value:function(e){this.setState({selected:e,chosen:!0})}},{key:"clearSelected",value:function(){this.setState({selected:null,chosen:!1,needsRefresh:!0})}},{key:"wantsNew",value:function(){this.setState({chosen:!0})}},{key:"refreshed",value:function(){this.setState({needsRefresh:!1})}},{key:"render",value:function(){var e=this.context.user;return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("h1",{className:"title",children:" Characters "}),!this.state.chosen&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("button",{onClick:this.wantsNew,children:"New Character"}),Object(ie.jsx)(Pe,{needsRefresh:this.state.needsRefresh,refreshed:this.refreshed,changeSelected:this.changeSelected,purpose:"Edit"})]}),this.state.chosen&&Object(ie.jsx)(De,{currentUser:e,characterID:this.state.selected,submit:this.handleEditSubmit,back:this.clearSelected})]})}}]),n}(w.a.Component);function Ae(e){var t=Object(I.useContext)(E).user,n=e.session,a=n.characters.map((function(e,a){return Object(ie.jsx)(Qe,{character:e,sessionID:n._id,currentUser:t._id},a)}));return Object(ie.jsxs)(ie.Fragment,{children:[0===n.characters.length&&Object(ie.jsx)("p",{children:"No characters in this party."}),0!==n.characters.length&&a]})}function Qe(e){var t=e.character.character,n=Object(U.useMutation)(ce,{variables:{session:e.sessionID,character:e.character._id}}),a=Object(L.a)(n,2),c=a[0];a[1].data;return Object(ie.jsxs)("div",{className:"campaign",children:[Object(ie.jsx)("p",{className:"campaign-name",children:t.name},"c1"),Object(ie.jsx)("ul",{children:Object(ie.jsxs)("li",{children:[Object(ie.jsx)("p",{children:t.hp}),t.user._id===e.currentUser&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("button",{onClick:function(){c({variables:{hp:t.hp+1}})},children:"+"}),Object(ie.jsx)("button",{onClick:function(){c({variables:{hp:t.hp-1}})},children:"-"})]})]},"hp")})]})}function Be(e){Object(I.useContext)(E).user;var t=Object(I.useState)(null),n=Object(L.a)(t,2),a=n[0],c=n[1],s=Object(I.useState)(!1),r=Object(L.a)(s,2),i=r[0],l=r[1],u=Object(I.useState)(!0),o=Object(L.a)(u,2),j=o[0],d=o[1];return Object(ie.jsx)("header",{className:"App-header",children:null!==a?Object(ie.jsx)(Te,{sessionID:a,needsRefetch:j,refetched:function(){d(!1)}}):Object(ie.jsx)(Pe,{needsRefresh:i,refreshed:function(){l(!0)},changeSelected:c,purpose:"Play"})})}function Te(e){var t=Object(U.useQuery)(se,{variables:{id:e.sessionID}}),n=t.data,a=t.loading,c=t.refetch,s=Object(U.useSubscription)(re,{variables:{id:e.sessionID}}),r=s.data,i=s.loading,l=Object(I.useState)(void 0),u=Object(L.a)(l,2),o=u[0],j=u[1];return Object(I.useEffect)((function(){e.needsRefetch&&(c(),e.refetched()),void 0===r?(a&&console.log("loading"),void 0!==n&&(console.log(n.session),j(n.session))):(console.log(r.sessionUpdate),j(r.sessionUpdate))}),[a,n,i,r,c,e]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("h2",{children:"Play the game"}),void 0!==o?Object(ie.jsx)("div",{className:"play",children:Object(ie.jsx)(Ae,{session:o})}):Object(ie.jsx)("p",{children:"No characters in this party."})]})}function Je(e){var t=Object(I.useContext)(E).user;return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:["Name: ",t.name]}),Object(ie.jsxs)("div",{children:["Username: ",t.username]}),Object(ie.jsxs)("div",{children:["Campaigns participated in: ",t.campaigns.length," (DM of ",t.campaigns.filter((function(e){return e.dm===t._id})).length,")"]}),Object(ie.jsxs)("div",{children:["Characters: ",t.characters.length]})]})}Me.contextType=E;var Ge=function(e){return Object(ie.jsx)("header",{className:"App-header",children:Object(ie.jsxs)(ue.c,{children:[" ",Object(ie.jsx)(ue.a,{exact:!0,path:"/",component:oe}),Object(ie.jsx)(ue.a,{exact:!0,path:"/Campaigns",component:ye}),Object(ie.jsx)(ue.a,{exact:!0,path:"/Characters",component:Me}),Object(ie.jsx)(ue.a,{exact:!0,path:"/Play",component:Be}),Object(ie.jsx)(ue.a,{exact:!0,path:"/MyAccount",component:Je})]})})};function He(e){for(var t=Object(U.useQuery)(M,{variables:{id:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error,s=t.refetch,r=t.networkStatus;r===U.NetworkStatus.refetch;)return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(le,{currentUser:a.user}),Object(ie.jsx)("header",{children:Object(ie.jsx)("p",{children:"Retrieving your data..."})})]});for(;n;)return Object(ie.jsx)("header",{children:Object(ie.jsx)("p",{children:"Loading..."})});if(c)return Object(ie.jsx)("p",{children:"There was an error. Please refresh the page and try again."});if(void 0!==a){var i={user:a.user,refreshUser:s};return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(le,{currentUser:a.user}),Object(ie.jsx)(E.Provider,{value:i,children:Object(ie.jsx)(Ge,{})})]})}}function ze(e){for(var t=Object(U.useQuery)(R,{variables:{username:e.username,password:e.password}},{fetchPolicy:"network-only"}),n=t.data,a=t.loading,c=Object(U.useMutation)(A),s=Object(L.a)(c,2),r=s[0],i=s[1],l=i.data,u=i.loading;a||u;)return console.log("loading"),Object(ie.jsx)("p",{children:"Loading..."});if(console.log(n.getUserID),void 0!==n)if(null!==n.getUserID||a){if(null!==n.getUserID&&!a)return console.log("user already exists",n.getUserID),Object(ie.jsx)("p",{children:"Error: User already exists, try again"})}else if(console.log("user doesn't already exist"),void 0===l)console.log("adding user"),r({variables:{name:e.name,email:e.email,username:e.username,password:e.password}});else if(null!=l)return console.log(l),Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsxs)("p",{children:["Welcome, ",e.name]})});return Object(ie.jsx)("p",{})}var Ve=function(e){Object(me.a)(n,e);var t=Object(he.a)(n);function n(e){var a;return Object(je.a)(this,n),(a=t.call(this,e)).Registered=a.props.Registered,a.handleNameChange=a.handleNameChange.bind(Object(be.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(be.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(be.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(be.a)(a)),a.handleRegisterAttempt=a.handleRegisterAttempt.bind(Object(be.a)(a)),a.state={badForm:!1,registered:!1,name:"",email:"",username:"",password:""},a}return Object(de.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleRegisterAttempt",value:function(e){e.preventDefault(),this.state.name&&this.state.email&&this.state.username&&this.state.password?this.setState({registered:!0}):this.setState({badForm:!0})}},{key:"render",value:function(){return Object(ie.jsxs)(ie.Fragment,{children:[!this.state.registered&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)("img",{src:"images/Nooth_DnD.png",width:"300",alt:"logo"}),Object(ie.jsx)("h1",{className:"title",children:"Sign Up"}),Object(ie.jsxs)("form",{className:"Form",onSubmit:this.handleRegisterAttempt,children:[Object(ie.jsxs)("label",{htmlFor:"fullname",className:"tbLabel",children:["Full Name:",Object(ie.jsx)("input",{type:"name",id:"fullname",name:"fullname",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"email",className:"tbLabel",name:"tbLabel",children:["Email:",Object(ie.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:this.handleEmailChange,value:this.state.email})]}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"username",className:"tbLabel",name:"tbLabel",children:["Username:",Object(ie.jsx)("input",{type:"username",id:"username",name:"username",required:!0,onChange:this.handleUsernameChange,value:this.state.username})]}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"password",className:"tbLabel",name:"tbLabel",children:["Password:",Object(ie.jsx)("input",{type:"password",id:"password",name:"password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("input",{type:"submit",value:"Submit"})]}),Object(ie.jsx)("br",{})]}),this.state.registered&&Object(ie.jsx)(ze,{name:this.state.name,email:this.state.email,username:this.state.username,password:this.state.password}),this.state.badForm&&Object(ie.jsx)("p",{children:"Please make sure all boxes are filled in"}),Object(ie.jsx)("button",{onClick:this.Registered,name:"next",variant:"outlined",children:"Go back to login"})]})}}]),n}(w.a.Component);function We(e){var t=Object(I.useState)(null),n=Object(L.a)(t,2),a=n[0],c=n[1],s=Object(I.useState)(""),r=Object(L.a)(s,2),i=r[0],l=r[1],u=Object(I.useState)(""),o=Object(L.a)(u,2),j=o[0],d=o[1],b=Object(I.useState)(!0),m=Object(L.a)(b,2),h=m[0],O=m[1],g=Object(I.useState)(!1),p=Object(L.a)(g,2),x=p[0],f=(p[1],Object(I.useState)(!1)),v=Object(L.a)(f,2),S=v[0],C=v[1],y=Object(U.useLazyQuery)(R,{fetchPolicy:"network-only"}),k=Object(L.a)(y,2),$=k[0],N=k[1],D=N.data,w=N.loading,_=N.called;return Object(I.useEffect)((function(){w||null===a||e.handleLogin(a),!w&&_&&null===a&&(void 0!==D?c(D.getUserID):C(!0))}),[w,_,a,D,e]),Object(ie.jsxs)("header",{className:"App-header",children:[h&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:[Object(ie.jsxs)("form",{id:"Form",className:"Form",onSubmit:function(e){e.preventDefault(),$({variables:{username:i,password:j}})},children:[Object(ie.jsx)("p",{children:" Please enter your username and password "}),Object(ie.jsxs)("label",{htmlFor:"user",children:["Username:",Object(ie.jsx)("input",{type:"username",name:"user",id:"user",required:!0,autoFocus:!0,value:i,onChange:function(e){e.preventDefault(),l(e.target.value)}})]}),Object(ie.jsx)("br",{}),Object(ie.jsxs)("label",{htmlFor:"pass",children:["Password:",Object(ie.jsx)("input",{type:"password",name:"pass",id:"pass",required:!0,value:j,onChange:function(e){e.preventDefault(),d(e.target.value)}})]}),Object(ie.jsx)("br",{}),Object(ie.jsx)("input",{type:"submit",value:"Submit",variant:"outlined"}),Object(ie.jsxs)("label",{htmlFor:"rememberLogin",children:[" Remember me",Object(ie.jsx)("input",{type:"checkbox",id:"rememberLogin",name:"rememberLogin",value:x})]})]}),Object(ie.jsx)("button",{name:"next2",variant:"outlined",onClick:function(){O(!1)},children:"register"})]}),S&&Object(ie.jsx)("p",{children:"Could not find a user to match input username and password."})]}),w&&Object(ie.jsx)("p",{children:"loading..."}),!h&&Object(ie.jsx)(Ve,{Registered:function(){O(!0)}})]})}var Ye=function(){var e=Object(I.useState)(null),t=Object(L.a)(e,2),n=t[0],a=t[1];return Object(ie.jsx)("div",{className:"App",children:n?Object(ie.jsx)(He,{id:n}):Object(ie.jsx)(We,{handleLogin:a})})},Ke=n(3),Xe=new(n(76).a)({uri:"ws://".concat(window.location.hostname,":8080/graphql"),options:{reconnect:!0}}),Ze=new U.HttpLink({uri:"http://".concat(window.location.hostname,":8080/graphql")}),et=Object(U.split)((function(e){var t=e.query,n=Object(Ke.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Xe,Ze),tt=new U.ApolloClient({link:et,cache:new U.InMemoryCache,onError:function(e){var t=e.networkError,n=e.graphQLErrors;console.log("graphQLErrors",n),console.log("networkError",t)}});F.a.render(Object(ie.jsx)(U.ApolloProvider,{client:tt,children:Object(ie.jsxs)(q.a,{children:[Object(ie.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),Object(ie.jsx)(Ye,{})]})}),document.getElementById("root"))},20:function(e,t,n){},82:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.1d39d387.chunk.js.map