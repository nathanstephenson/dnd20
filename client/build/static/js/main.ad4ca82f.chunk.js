(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t),n.d(t,"apolloClient",(function(){return Je}));var a,c,s,r,i,l,u,o,b,d,j,h,m,g,O,p,x,f,v,S,C,y,k,w=n(3),$=n.n(w),D=n(72),N=n.n(D),I=n(27),F=(n(82),n(6)),_=(n(20),n(5)),q=$.a.createContext({user:null,refreshUser:function(){},toggleNavBar:function(){}}),L=n(13),U=Object(_.gql)(a||(a=Object(L.a)(["\n  query getUserID($username:String, $password:String){\n    getUserID(username:$username, password:$password)\n  }\n"]))),E=Object(_.gql)(c||(c=Object(L.a)(["\n  query getUserByID($id: String){\n    user(id: $id){\n      _id\n      name\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n      characters{\n        _id\n        name\n        campaign\n      }\n    }\n  }\n"]))),P=Object(_.gql)(s||(s=Object(L.a)(["\n  mutation addUser($name:String, $username:String, $password:String){\n    addUser(name:$name, username:$username, password:$password){\n      name\n    }\n  }\n"]))),R=(Object(_.gql)(r||(r=Object(L.a)(["\n  subscription currentUser($id:String){\n    updateUser(id:$id){\n      _id\n      name\n      permissions\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n    }\n  }\n"]))),Object(_.gql)(i||(i=Object(L.a)(["\n  query getCampaignID($name:String){\n    campaign(name:$name){\n      _id\n    }\n  }\n"]))),Object(_.gql)(l||(l=Object(L.a)(["\n  query getCampaign($id:String){\n    campaign(id:$id){\n      name\n      dm\n    }\n  }\n"])))),M=Object(_.gql)(u||(u=Object(L.a)(["\n  mutation addCampaign($dm:String, $name:String){\n    addCampaign(dm:$dm, name:$name){\n      _id\n    }\n  }\n"]))),A=Object(_.gql)(o||(o=Object(L.a)(["\n  mutation joinExistingCampaign($id:String, $user:String){\n      joinCampaign(id:$id, user:$user){\n        name\n      }\n  }\n"]))),B=Object(_.gql)(b||(b=Object(L.a)(["\n  mutation deleteCampaign($user:String, $dm:String, $campaign:String){\n    deleteCampaign(user:$user, dm:$dm, campaign:$campaign)\n  }\n"]))),Q=Object(_.gql)(d||(d=Object(L.a)(["\n  mutation renameCampaign($id:String, $name:String){\n    renameCampaign(id:$id, name:$name){\n      name\n    }\n  }\n"]))),G=Object(_.gql)(j||(j=Object(L.a)(["\n  query getCharacter($id:String){\n    character(id:$id){\n      _id\n      user\n      campaign\n      name\n      race\n      background\n      class\n      level\n      hp\n      cha\n      con\n      dex\n      int\n      str\n      wis\n    }\n  }\n"]))),J=Object(_.gql)(h||(h=Object(L.a)(["\n  mutation addCharacter($user:String, $campaign:String, $name:String, $race:String, $background:String){\n    addCharacter(user:$user, campaign:$campaign, name:$name, race:$race, background:$background){\n      _id\n      name\n    }\n  }\n"]))),H=Object(_.gql)(m||(m=Object(L.a)(["\n  mutation updateCharacterInfo($id:String, $name:String, $campaign:String){\n    updateCharacterInfo(id:$id, name:$name, campaign:$campaign){\n      _id\n      name\n    }\n  }\n"]))),T=Object(_.gql)(g||(g=Object(L.a)(["\n  mutation updateCharacterStats($id:String, $class:String, $cha:Int, $con:Int, $dex:Int, $int:Int, $str:Int, $wis:Int){\n    updateCharacterStats(id:$id, class:$class, cha:$cha, con:$con, dex:$dex, int:$int, str:$str, wis:$wis){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),z=Object(_.gql)(O||(O=Object(L.a)(["\n  mutation deleteCharacter($user:String, $campaign:String, $character:String){\n    deleteCharacter(user:$user, campaign:$campaign, character:$character)\n  }\n"]))),W=Object(_.gql)(p||(p=Object(L.a)(["\n  query getClasses{\n    classes{\n      index\n      name\n    }\n  }\n"]))),Y=Object(_.gql)(x||(x=Object(L.a)(["\n  query getRaces{\n    races{\n      index\n      name\n      speed\n      age\n      alignment\n      size_description\n      language_desc\n    }\n  }\n"]))),K=(Object(_.gql)(f||(f=Object(L.a)(["\n  query currentSessionID($campaign:String){\n    getCurrentSessionID(campaign:$campaign)\n  }\n"]))),Object(_.gql)(v||(v=Object(L.a)(["\n  mutation createSession($campaign:String, $user:String){\n    createSession(campaign:$campaign, user:$user){\n      _id\n    }\n  }\n"])))),V=Object(_.gql)(S||(S=Object(L.a)(["\n  mutation endSession($campaign:String, $user:String){\n    endSession(campaign:$campaign, user:$user)\n  }\n"]))),X=Object(_.gql)(C||(C=Object(L.a)(["\n  mutation changeCharacterHealth($session:String, $character:String, $hp:Int){\n    changeCharacterHealth(session:$session, character:$character, hp:$hp)\n  }\n"]))),Z=Object(_.gql)(y||(y=Object(L.a)(["\n  query currentSession($id:String){\n    session(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),ee=Object(_.gql)(k||(k=Object(L.a)(["\n  subscription onSessionUpdate($id:String){\n    sessionUpdate(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),te=n(0);function ne(e){window.location.pathname;var t=[Object(te.jsx)(I.b,{to:"/",className:"navLink-home",children:Object(te.jsx)("h3",{children:" DND20 "})}),Object(te.jsx)(I.b,{to:"/Campaigns",className:"navLink",children:Object(te.jsx)("p",{children:" Campaigns "})}),Object(te.jsx)(I.b,{to:"/Characters",className:"navLink",children:Object(te.jsx)("p",{children:" Characters "})}),Object(te.jsx)(I.b,{to:"/Play",className:"navLink",children:Object(te.jsx)("p",{children:" Play "})}),Object(te.jsx)(I.b,{to:"/MyAccount",className:"navLink",children:Object(te.jsx)("p",{children:" My Account "})})];return Object(te.jsx)("nav",{className:"navbar",children:t})}var ae=n(14);var ce=function(){var e=Object(w.useContext)(q).user,t=Object(w.useState)("Next"),n=Object(F.a)(t,2),a=n[0],c=n[1];return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("br",{}),Object(te.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(te.jsx)("br",{}),Object(te.jsx)("h1",{className:"title",children:"DnD20"}),Object(te.jsx)("button",{name:"showpong",onClick:function(){c(e?e.name:"no user")},children:a}),Object(te.jsx)("p",{children:"welcome to the app, gamer"})]})},se=n(32),re=n(33),ie=n(12),le=n(35),ue=n(34),oe=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var a;return Object(se.a)(this,n),(a=t.call(this,e)).campaignID=a.props.campaignID,a.handleNameChange=a.handleNameChange.bind(Object(ie.a)(a)),a.submit=a.submit.bind(Object(ie.a)(a)),a.delete=a.delete.bind(Object(ie.a)(a)),a.submitted=a.submitted.bind(Object(ie.a)(a)),a.returnCampaign=a.returnCampaign.bind(Object(ie.a)(a)),a.toggleID=a.toggleID.bind(Object(ie.a)(a)),a.state={submit:!1,delete:!1,loaded:!1,campaign:null,name:"",showID:!1},a}return Object(re.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"submit",value:function(e){this.setState({submit:!0}),this.props.submit(e)}},{key:"delete",value:function(){this.setState({delete:!0})}},{key:"submitted",value:function(){var e=this;this.setState({submit:!1,delete:!1},(function(){e.props.back()}))}},{key:"returnCampaign",value:function(e){console.log("selected campaign:",e),this.setState({campaign:e,name:e.name,loaded:!0})}},{key:"toggleID",value:function(){this.setState({showID:!this.state.showID})}},{key:"render",value:function(){if(null!=this.campaignID){var e=!1;return null!==this.state.campaign&&(e=this.props.currentUserID===this.state.campaign.dm),Object(te.jsxs)(te.Fragment,{children:[!this.state.loaded&&!this.state.submit&&Object(te.jsx)("div",{children:Object(te.jsx)(be,{ID:this.campaignID,return:this.returnCampaign})}),e&&Object(te.jsx)(te.Fragment,{children:this.state.loaded&&!this.state.submit&&Object(te.jsxs)("div",{children:[Object(te.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(te.jsx)("h1",{className:"title",children:"Edit Campaign"}),this.state.showID?Object(te.jsx)(te.Fragment,{children:Object(te.jsxs)("p",{children:[this.campaignID,Object(te.jsx)("button",{onClick:this.toggleID,children:"x"})]})}):Object(te.jsx)("button",{onClick:this.toggleID,children:"Show ID"}),Object(te.jsx)("button",{onClick:this.delete,children:"Delete this campaign"}),Object(te.jsxs)("form",{className:"Form",onSubmit:this.submit,children:[Object(te.jsxs)("div",{children:[Object(te.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(te.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(te.jsx)("br",{})]}),Object(te.jsx)("input",{type:"submit",value:"Submit"})]}),Object(te.jsx)("br",{})]})}),this.state.submit&&Object(te.jsx)(de,{submitted:this.submitted,id:this.campaignID,name:this.state.name}),this.state.delete&&Object(te.jsx)(je,{submitted:this.submitted,dm:this.state.campaign.dm,campaignID:this.campaignID}),Object(te.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}return Object(te.jsxs)("div",{children:[Object(te.jsx)("p",{children:"Error: No Campaign"}),Object(te.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}}]),n}($.a.Component);function be(e){for(var t=Object(_.useQuery)(R,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error;n;)return Object(te.jsx)("p",{children:"loading..."});return c?(console.log(c),Object(te.jsx)("p",{})):(e.return(a.campaign),Object(te.jsx)("p",{children:"done"}))}function de(e){for(var t=Object(_.useMutation)(Q),n=Object(F.a)(t,2),a=n[0],c=n[1],s=c.data,r=c.loading;r;)return Object(te.jsx)("p",{children:"loading"});return void 0===s?a({variables:{id:e.id,name:e.name}}):(console.log(s),e.submitted()),null}function je(e){for(var t=Object(w.useContext)(q).user,n=Object(_.useMutation)(B),a=Object(F.a)(n,2),c=a[0],s=a[1],r=s.data,i=s.loading;i;)return Object(te.jsx)("p",{children:"Loading..."});return void 0===r?(c({variables:{user:t._id,dm:e.dm,campaign:e.campaignID}}),console.log("attempted deleteCampaign")):null!=r&&(console.log("done",r),e.submitted()),null}function he(e){var t=Object(w.useContext)(q),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=n.campaigns.map((function(t,a){return Object(te.jsx)(me,{campaign:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n._id},a)}));return Object(te.jsxs)(te.Fragment,{children:[0===n.campaigns.length&&Object(te.jsx)("p",{children:"You are not currently participating in any campaigns."}),0!==n.campaigns.length&&c]})}function me(e){return console.log(e.campaign.dm,e.currentUser),Object(te.jsxs)("div",{className:"campaign",children:[Object(te.jsx)("p",{className:"campaign-name",children:e.campaign.name},"c1"),Object(te.jsx)("ul",{children:Object(te.jsxs)("li",{children:["Edit"===e.purpose&&Object(te.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign._id)},children:"Edit"}),"Play"===e.purpose&&Object(te.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign.currentSession)},children:"Play"})]},"editButton")})]})}function ge(e){var t=Object(w.useContext)(q).user,n=Object(w.useState)(null),a=Object(F.a)(n,2),c=a[0],s=a[1],r=Object(w.useState)(!1),i=Object(F.a)(r,2),l=i[0],u=i[1],o=Object(w.useState)(!1),b=Object(F.a)(o,2),d=b[0],j=b[1],h=Object(w.useState)(""),m=Object(F.a)(h,2),g=m[0],O=m[1],p=Object(w.useState)(!1),x=Object(F.a)(p,2),f=x[0],v=x[1],S=Object(w.useState)(!1),C=Object(F.a)(S,2),y=C[0],k=C[1],$=Object(w.useState)(!1),D=Object(F.a)($,2),N=D[0],I=D[1],L=Object(w.useState)(""),U=Object(F.a)(L,2),E=U[0],P=U[1],R=Object(w.useState)(!1),B=Object(F.a)(R,2),Q=B[0],G=B[1],J=Object(_.useMutation)(M),H=Object(F.a)(J,2),T=H[0],z=H[1],W=z.data,Y=z.loading,K=Object(_.useMutation)(A),V=Object(F.a)(K,2),X=V[0],Z=V[1],ee=Z.data,ne=Z.loading;return Object(w.useEffect)((function(){d&&f&&!Y&&void 0===W&&T({variables:{dm:t._id,name:g}}),void 0!==W&&(j(!1),v(!1),u(!0),s(W.addCampaign._id))}),[W,Y,T,g,f,t._id,d]),Object(w.useEffect)((function(){N&&Q&&!ne&&void 0===ee&&X({variables:{id:E,user:t._id}}),void 0!==ee&&(I(!1),G(!1),u(!0),s(ee.joinCampaign._id))}),[X,ee,ne,E,Q,t._id,N]),Object(te.jsxs)(te.Fragment,{children:[!l&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h1",{className:"title",children:" Campaigns "}),!N&&Object(te.jsx)("button",{onClick:function(){I(!N)},children:"Join Campaign"}),N&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("input",{type:"campaign",onChange:function(e){e.preventDefault(),P(e.target.value)},value:E}),Object(te.jsx)("button",{onClick:function(){G(!Q)},children:"Join"}),Object(te.jsx)("button",{onClick:function(){I(!N)},children:"x"})]}),!d&&!f&&Object(te.jsx)("button",{onClick:function(){j(!d)},children:"+"}),d&&!f&&Object(te.jsx)(te.Fragment,{children:Object(te.jsxs)("form",{className:"Form",onSubmit:function(e){e.preventDefault(),v(!f)},children:[Object(te.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(te.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),O(e.target.value)},value:g})]}),Object(te.jsx)("input",{type:"submit",value:"Submit"}),Object(te.jsx)("button",{onClick:function(){j(!d)},children:"x"})]})}),Object(te.jsx)("br",{}),Object(te.jsx)("br",{}),Object(te.jsx)(he,{needsRefresh:y,refreshed:function(){k(!1)},changeSelected:function(e){s(e),u(!0)},purpose:"Edit"})]}),l&&Object(te.jsx)(oe,{currentUserID:t._id,campaignID:c,submit:function(){},back:function(){s(null),u(!1),k(!0)}})]})}function Oe(e,t){var n=[];if(void 0!==e[0])if(void 0!==e[0].index)for(var a=0;a<e.length;a++)e[a].index,n.push(Object(te.jsx)("option",{value:e[a].index,children:e[a].name},a));else if(void 0!==e[0]._id)for(var c=0;c<e.length;c++)e[c].index,n.push(Object(te.jsx)("option",{value:e[c]._id,children:e[c].name},c));return n}var pe=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var a;return Object(se.a)(this,n),(a=t.call(this,e)).user=a.props.currentUser,a.characterID=a.props.characterID,a.returnLoaded=a.returnLoaded.bind(Object(ie.a)(a)),a.submittedNew=a.submittedNew.bind(Object(ie.a)(a)),a.state={character:null,submitNew:!1,submitGeneral:!1,name:"",race:"",bg:"",campaign:""},a}return Object(re.a)(n,[{key:"returnLoaded",value:function(e){this.setState({character:e})}},{key:"submittedNew",value:function(){this.setState({submitNew:!1,name:"",race:"",bg:"",campaign:""}),this.props.back()}},{key:"render",value:function(){return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("button",{className:"backButton",onClick:this.props.back,children:"Back"}),Object(te.jsx)(fe,{submitNew:this.submitNew,submitGeneral:this.submitGeneral,user:this.user,character:this.state.character,new:null===this.state.character,back:this.props.back}),null!==this.characterID&&null===this.state.character&&Object(te.jsx)(xe,{ID:this.characterID,return:this.returnLoaded})]})}}]),n}($.a.Component);function xe(e){console.log(e.ID);for(var t=Object(_.useQuery)(G,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error;n;)return Object(te.jsx)("p",{children:"loading..."});return c?(console.log(c),Object(te.jsx)("p",{})):(console.log(a),e.return(a.character),Object(te.jsx)("p",{children:"done"}))}function fe(e){console.log("character info",e.new);var t=Object(_.useQuery)(Y),n=t.loading,a=t.data,c=Object(_.useQuery)(W),s=c.loading,r=c.data,i=Object(w.useState)(0),l=Object(F.a)(i,2),u=l[0];for(l[1];s||n;)return Object(te.jsx)("p",{children:"Loading..."});var o=[e.new?Object(te.jsx)(ve,{races:a.races,user:e.user,submit:e.submitNew,back:e.back}):Object(te.jsx)(Se,{character:e.character,classes:r.classes,submit:e.submitGeneral,back:e.back})];return o.forEach((function(e){e!==o[u]&&(e=null)})),Object(te.jsx)("div",{children:o})}function ve(e){var t=Object(w.useContext)(q).user,n=Object(w.useState)(""),a=Object(F.a)(n,2),c=a[0],s=a[1],r=Object(w.useState)(""),i=Object(F.a)(r,2),l=i[0],u=i[1],o=Object(w.useState)(""),b=Object(F.a)(o,2),d=b[0],j=b[1],h=Object(w.useState)(""),m=Object(F.a)(h,2),g=m[0],O=m[1],p=Object(_.useMutation)(J),x=Object(F.a)(p,2),f=x[0],v=x[1],S=v.loading,C=v.data;for(console.log(t.campaigns),Object(w.useEffect)((function(){void 0!==t.campaigns[0]&&(console.log(t.campaigns[0]._id),O(t.campaigns[0]._id)),void 0!==e.races[0]&&(console.log(e.races[0].index),j(e.races[0].index))}),[e.races,t.campaigns]);S;)return Object(te.jsx)("p",{children:"Loading..."});return void 0!==C&&e.back(),Object(te.jsxs)("form",{onSubmit:function(){console.log(t._id,g,c,d,l),f({variables:{user:t._id,campaign:g,name:c,race:d,background:l}})},children:[Object(te.jsx)("input",{type:"submit"}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(te.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),s(e.target.value)},value:c})]}),Object(te.jsx)(ke,{id:"campaign",campaigns:t.campaigns,changeCampaign:O}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"bg",className:"tbLabel",children:["Background Info / Lore:",Object(te.jsx)("textarea",{id:"bg",name:"bg",onChange:function(e){e.preventDefault(),u(e.target.value)},value:l,rows:"4",cols:"50",maxLength:"500"})]}),Object(te.jsx)("br",{}),Object(te.jsx)(ye,{id:"race",races:e.races,changeRace:j}),Object(te.jsx)("br",{})]})}function Se(e){var t=Object(w.useContext)(q).user,n=e.character,a=Object(w.useState)(n.campaign),c=Object(F.a)(a,2),s=c[0],r=c[1],i=Object(w.useState)(n.class),l=Object(F.a)(i,2),u=l[0],o=l[1],b=Object(w.useState)(n.str),d=Object(F.a)(b,2),j=d[0],h=d[1],m=Object(w.useState)(n.dex),g=Object(F.a)(m,2),O=g[0],p=g[1],x=Object(w.useState)(n.con),f=Object(F.a)(x,2),v=f[0],S=f[1],C=Object(w.useState)(n.int),y=Object(F.a)(C,2),k=y[0],$=y[1],D=Object(w.useState)(n.wis),N=Object(F.a)(D,2),I=N[0],L=N[1],U=Object(w.useState)(n.cha),E=Object(F.a)(U,2),P=E[0],R=E[1],M=Object(w.useState)(!1),A=Object(F.a)(M,2),B=A[0],Q=A[1],G=Object(w.useState)(n.name),J=Object(F.a)(G,2),W=J[0],Y=J[1],K=Object(_.useMutation)(z,{variables:{character:n._id,user:n.user,campaign:n.campaign}}),V=Object(F.a)(K,2),X=V[0],Z=V[1],ee=Z.loading,ne=Z.data,ae=Object(_.useMutation)(H,{variables:{id:n._id,name:W,campaign:s}}),ce=Object(F.a)(ae,2),se=ce[0],re=ce[1],ie=re.loading,le=re.data,ue=Object(_.useMutation)(T,{variables:{id:n._id,class:u,cha:parseInt(P),con:parseInt(v),str:parseInt(j),dex:parseInt(O),int:parseInt(k),wis:parseInt(I)}}),oe=Object(F.a)(ue,2),be=oe[0],de=oe[1],je=de.loading,he=de.data;for(Object(w.useEffect)((function(){void 0!==e.classes[0]&&o(e.classes[0].index)}),[e.classes]);ee||ie||je;)return ee&&console.log(n._id,n.user,n.campaign),Object(te.jsx)("p",{children:"loading"});return void 0===ne&&void 0===le&&void 0===he||e.back(),Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("div",{children:[Object(te.jsx)("h2",{children:n.name}),Object(te.jsx)("button",{onClick:X,children:"Delete Character"})]}),B?Object(te.jsx)(te.Fragment,{children:Object(te.jsxs)("form",{onSubmit:se,children:[Object(te.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(te.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),Y(e.target.value)},value:W})]}),Object(te.jsx)(ke,{id:"campaign",current:s,campaigns:t.campaigns,changeCampaign:r}),Object(te.jsx)("input",{type:"submit"}),Object(te.jsx)("button",{onClick:function(){Q(!B)},children:"Cancel"})]})}):Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("button",{onClick:function(){Q(!B)},children:"Rename/ChangeCampaign"}),Object(te.jsx)("br",{})]}),Object(te.jsxs)("form",{onSubmit:be,children:[Object(te.jsx)("input",{type:"submit"}),Object(te.jsx)("br",{}),Object(te.jsx)(Ce,{id:"class",current:u,classes:e.classes,changeClass:o}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"str",className:"tbLabel",children:["Str:",Object(te.jsx)("input",{type:"number",id:"str",name:"str",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),h(e.target.value)},value:j})]}),Object(te.jsxs)("label",{htmlFor:"dex",className:"tbLabel",children:["Dex:",Object(te.jsx)("input",{type:"number",id:"dex",name:"dex",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),p(e.target.value)},value:O})]}),Object(te.jsxs)("label",{htmlFor:"con",className:"tbLabel",children:["Con:",Object(te.jsx)("input",{type:"number",id:"con",name:"con",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),S(e.target.value)},value:v})]}),Object(te.jsxs)("label",{htmlFor:"int",className:"tbLabel",children:["Int:",Object(te.jsx)("input",{type:"number",id:"int",name:"int",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),$(e.target.value)},value:k})]}),Object(te.jsxs)("label",{htmlFor:"wis",className:"tbLabel",children:["Wis:",Object(te.jsx)("input",{type:"number",id:"wis",name:"wis",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),L(e.target.value)},value:I})]}),Object(te.jsxs)("label",{htmlFor:"cha",className:"tbLabel",children:["Cha:",Object(te.jsx)("input",{type:"number",id:"cha",name:"cha",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),R(e.target.value)},value:P})]})]})]})}function Ce(e){var t=Oe(e.classes,e.current);return Object(te.jsxs)("label",{htmlFor:"class",className:"tbLabel",children:["Class:",Object(te.jsx)("select",{id:"classes",required:!0,name:"classes",onChange:function(t){e.changeClass(e.classes[t.target.selectedIndex].index)},children:t})]})}function ye(e){var t=Object(w.useState)(0),n=Object(F.a)(t,2),a=n[0],c=n[1],s=Oe(e.races);return Object(te.jsxs)("div",{children:[Object(te.jsxs)("label",{htmlFor:"races",required:!0,className:"tbLabel",children:["Race:",Object(te.jsx)("select",{id:"races",name:"races",selectedIndex:"0",onChange:function(t){e.changeRace(e.races[t.target.selectedIndex].index),c(t.target.selectedIndex)},children:s})]}),Object(te.jsx)("p",{children:e.races[a].alignment})]})}function ke(e){var t=Oe(e.campaigns,e.current);return Object(te.jsx)(te.Fragment,{children:Object(te.jsxs)("label",{htmlFor:"campaigns",className:"tbLabel",children:["Campaign:",Object(te.jsx)("select",{id:"campaigns",name:"campaigns",selectedIndex:"0",required:!0,onChange:function(t){e.changeCampaign(e.campaigns[t.target.selectedIndex]._id)},children:t})]})})}function we(e){var t=Object(w.useContext)(q),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=Object(_.useMutation)(K),s=Object(F.a)(c,2),r=s[0],i=(s[1].data,Object(_.useMutation)(V)),l=Object(F.a)(i,2),u=l[0],o=(l[1].data,n),b=o.characters.map((function(t,a){return Object(te.jsx)($e,{character:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n,campaign:o.campaigns.find((function(e){return e._id===t.campaign}))},a)}));return"Play"===e.purpose&&b.push(o.campaigns.map((function(e){return Object(te.jsxs)(te.Fragment,{children:[n._id===e.dm&&null===e.currentSession&&Object(te.jsxs)("button",{onClick:function(){return r({variables:{campaign:e._id,user:n._id}})},children:["Begin ",e.name]}),n._id===e.dm&&null!==e.currentSession&&Object(te.jsxs)("button",{onClick:function(){return u({variables:{campaign:e._id,user:n._id}})},children:["End ",e.name," session"]})]})}))),Object(te.jsxs)("div",{children:["Play"===e.purpose&&Object(te.jsx)("button",{onClick:function(){a()},children:"Refresh"}),0===n.characters.length&&Object(te.jsx)("p",{children:"You do not currently have any characters."}),0!==n.campaigns.length&&b]})}function $e(e){return Object(te.jsxs)("div",{className:"character",children:[Object(te.jsx)("p",{className:"characer-name",children:e.character.name},"c1"),Object(te.jsx)("ul",{children:Object(te.jsxs)("li",{children:["Edit"===e.purpose&&Object(te.jsx)("button",{onClick:function(){return e.changeSelected(e.character._id)},children:"Edit"}),"Play"===e.purpose&&null!==e.campaign.currentSession&&Object(te.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign.currentSession)},children:"Play"})]},"mainButton")})]})}pe.contextType=q;var De=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var a;return Object(se.a)(this,n),(a=t.call(this,e)).state={selected:null,chosen:!1,needsRefresh:!1,needsSubmit:!1},a.handleEditSubmit=a.handleEditSubmit.bind(Object(ie.a)(a)),a.changeSelected=a.changeSelected.bind(Object(ie.a)(a)),a.clearSelected=a.clearSelected.bind(Object(ie.a)(a)),a.wantsNew=a.wantsNew.bind(Object(ie.a)(a)),a.refreshed=a.refreshed.bind(Object(ie.a)(a)),a}return Object(re.a)(n,[{key:"handleEditSubmit",value:function(e){e.preventDefault()}},{key:"changeSelected",value:function(e){this.setState({selected:e,chosen:!0})}},{key:"clearSelected",value:function(){this.setState({selected:null,chosen:!1,needsRefresh:!0})}},{key:"wantsNew",value:function(){this.setState({chosen:!0})}},{key:"refreshed",value:function(){this.setState({needsRefresh:!1})}},{key:"render",value:function(){var e=this.context.user;return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h1",{className:"title",children:" Characters "}),!this.state.chosen&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("button",{onClick:this.wantsNew,children:"New Character"}),Object(te.jsx)(we,{needsRefresh:this.state.needsRefresh,refreshed:this.refreshed,changeSelected:this.changeSelected,purpose:"Edit"})]}),this.state.chosen&&Object(te.jsx)(pe,{currentUser:e,characterID:this.state.selected,submit:this.handleEditSubmit,back:this.clearSelected})]})}}]),n}($.a.Component);function Ne(e){var t=Object(w.useContext)(q).user,n=e.session,a=n.characters.map((function(e,a){if(e.character.user===t._id)return Object(te.jsx)(Ie,{character:e,sessionID:n._id,currentUser:t._id},a)})),c=n.characters.map((function(e,a){if(e.character.user!==t._id)return Object(te.jsx)(Ie,{character:e,sessionID:n._id,currentUser:t._id},a)}));return Object(te.jsxs)(te.Fragment,{children:[a,0===n.characters.length&&Object(te.jsx)("p",{children:"No characters in this party."}),0!==n.characters.length&&c]})}function Ie(e){var t=e.character.character,n=Object(_.useMutation)(X,{variables:{session:e.sessionID,character:e.character._id}}),a=Object(F.a)(n,2),c=a[0];a[1].data;return Object(te.jsxs)("div",{className:"campaign",children:[Object(te.jsx)("p",{className:"campaign-name",children:t.name},"c1"),Object(te.jsx)("ul",{children:Object(te.jsxs)("li",{children:[Object(te.jsx)("p",{children:t.hp}),t.user===e.currentUser&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("button",{onClick:function(){c({variables:{hp:t.hp+1}})},children:"+"}),Object(te.jsx)("button",{onClick:function(){c({variables:{hp:t.hp-1}})},children:"-"})]})]},"hp")})]})}function Fe(e){Object(w.useContext)(q).user;var t=Object(w.useState)(null),n=Object(F.a)(t,2),a=n[0],c=n[1],s=Object(w.useState)(!1),r=Object(F.a)(s,2),i=r[0],l=r[1],u=Object(w.useState)(!0),o=Object(F.a)(u,2),b=o[0],d=o[1];return Object(te.jsx)("header",{className:"App-header",children:null!==a?Object(te.jsx)(_e,{sessionID:a,needsRefetch:b,refetched:function(){d(!1)}}):Object(te.jsx)(we,{needsRefresh:i,refreshed:function(){l(!0)},changeSelected:c,purpose:"Play"})})}function _e(e){var t=Object(_.useQuery)(Z,{variables:{id:e.sessionID}}),n=t.data,a=t.loading,c=t.refetch,s=Object(_.useSubscription)(ee,{variables:{id:e.sessionID}}),r=s.data,i=s.loading,l=Object(w.useState)(void 0),u=Object(F.a)(l,2),o=u[0],b=u[1];return Object(w.useEffect)((function(){e.needsRefetch&&(c(),e.refetched()),void 0===r?(a&&console.log("loading"),void 0!==n&&(console.log(n.session),b(n.session))):(console.log(r.sessionUpdate),b(r.sessionUpdate))}),[a,n,i,r,c,e]),Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)("h2",{children:"Play the game"}),void 0!==o?Object(te.jsx)(Ne,{session:o}):Object(te.jsx)("p",{children:"No characters in this party."})]})}function qe(e){Object(w.useContext)(q).user;return Object(te.jsx)(te.Fragment,{})}De.contextType=q;var Le=function(e){return Object(te.jsx)("header",{className:"App-header",children:Object(te.jsxs)(ae.c,{children:[" ",Object(te.jsx)(ae.a,{exact:!0,path:"/",component:ce}),Object(te.jsx)(ae.a,{exact:!0,path:"/Campaigns",component:ge}),Object(te.jsx)(ae.a,{exact:!0,path:"/Characters",component:De}),Object(te.jsx)(ae.a,{exact:!0,path:"/Play",component:Fe}),Object(te.jsx)(ae.a,{exact:!0,path:"/MyAccount",component:qe})]})})};function Ue(e){for(var t=Object(_.useQuery)(E,{variables:{id:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error,s=t.refetch,r=t.networkStatus;r===_.NetworkStatus.refetch;)return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ne,{currentUser:a.user}),Object(te.jsx)("header",{children:Object(te.jsx)("p",{children:"Retrieving your data..."})})]});for(;n;)return Object(te.jsx)("header",{children:Object(te.jsx)("p",{children:"Loading..."})});if(c)return Object(te.jsx)("p",{children:"There was an error. Please refresh the page and try again."});if(void 0!==a){var i={user:a.user,refreshUser:s};return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ne,{currentUser:a.user}),Object(te.jsx)(q.Provider,{value:i,children:Object(te.jsx)(Le,{})})]})}}function Ee(e){for(var t=Object(_.useQuery)(U,{variables:{username:e.username,password:e.password}},{fetchPolicy:"network-only"}),n=t.data,a=t.loading,c=Object(_.useMutation)(P),s=Object(F.a)(c,2),r=s[0],i=s[1],l=i.data,u=i.loading;a||u;)return console.log("loading"),Object(te.jsx)("p",{children:"Loading..."});if(console.log(n.getUserID),void 0!==n)if(null!==n.getUserID||a){if(null!==n.getUserID&&!a)return console.log("user already exists",n.getUserID),Object(te.jsx)("p",{children:"Error: User already exists, try again"})}else if(console.log("user doesn't already exist"),void 0===l)console.log("adding user"),r({variables:{name:e.name,email:e.email,username:e.username,password:e.password}});else if(null!=l)return console.log(l),Object(te.jsx)(te.Fragment,{children:Object(te.jsxs)("p",{children:["Welcome, ",e.name]})});return Object(te.jsx)("p",{})}var Pe=function(e){Object(le.a)(n,e);var t=Object(ue.a)(n);function n(e){var a;return Object(se.a)(this,n),(a=t.call(this,e)).Registered=a.props.Registered,a.handleNameChange=a.handleNameChange.bind(Object(ie.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(ie.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(ie.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(ie.a)(a)),a.handleRegisterAttempt=a.handleRegisterAttempt.bind(Object(ie.a)(a)),a.state={badForm:!1,registered:!1,name:"",email:"",username:"",password:""},a}return Object(re.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleRegisterAttempt",value:function(e){e.preventDefault(),this.state.name&&this.state.email&&this.state.username&&this.state.password?this.setState({registered:!0}):this.setState({badForm:!0})}},{key:"render",value:function(){return Object(te.jsxs)(te.Fragment,{children:[!this.state.registered&&Object(te.jsxs)("div",{children:[Object(te.jsx)("img",{src:"images/Nooth_DnD.png",width:"300",alt:"logo"}),Object(te.jsx)("h1",{className:"title",children:"Sign Up"}),Object(te.jsxs)("form",{className:"Form",onSubmit:this.handleRegisterAttempt,children:[Object(te.jsxs)("label",{htmlFor:"fullname",className:"tbLabel",children:["Full Name:",Object(te.jsx)("input",{type:"name",id:"fullname",name:"fullname",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"email",className:"tbLabel",name:"tbLabel",children:["Email:",Object(te.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:this.handleEmailChange,value:this.state.email})]}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"username",className:"tbLabel",name:"tbLabel",children:["Username:",Object(te.jsx)("input",{type:"username",id:"username",name:"username",required:!0,onChange:this.handleUsernameChange,value:this.state.username})]}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"password",className:"tbLabel",name:"tbLabel",children:["Password:",Object(te.jsx)("input",{type:"password",id:"password",name:"password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})]}),Object(te.jsx)("br",{}),Object(te.jsx)("input",{type:"submit",value:"Submit"})]}),Object(te.jsx)("br",{})]}),this.state.registered&&Object(te.jsx)(Ee,{name:this.state.name,email:this.state.email,username:this.state.username,password:this.state.password}),this.state.badForm&&Object(te.jsx)("p",{children:"Please make sure all boxes are filled in"}),Object(te.jsx)("button",{onClick:this.Registered,name:"next",variant:"outlined",children:"Go back to login"})]})}}]),n}($.a.Component);function Re(e){var t=Object(w.useState)(null),n=Object(F.a)(t,2),a=n[0],c=n[1],s=Object(w.useState)(""),r=Object(F.a)(s,2),i=r[0],l=r[1],u=Object(w.useState)(""),o=Object(F.a)(u,2),b=o[0],d=o[1],j=Object(w.useState)(!0),h=Object(F.a)(j,2),m=h[0],g=h[1],O=Object(w.useState)(!1),p=Object(F.a)(O,2),x=p[0],f=(p[1],Object(w.useState)(!1)),v=Object(F.a)(f,2),S=v[0],C=v[1],y=Object(_.useLazyQuery)(U,{fetchPolicy:"network-only"}),k=Object(F.a)(y,2),$=k[0],D=k[1],N=D.data,I=D.loading,q=D.called;return Object(w.useEffect)((function(){I||null===a||e.handleLogin(a),!I&&q&&null===a&&(void 0!==N?c(N.getUserID):C(!0))}),[I,q,a,N,e]),Object(te.jsxs)("header",{className:"App-header",children:[m&&Object(te.jsxs)(te.Fragment,{children:[Object(te.jsxs)("div",{children:[Object(te.jsxs)("form",{id:"Form",className:"Form",onSubmit:function(e){e.preventDefault(),$({variables:{username:i,password:b}})},children:[Object(te.jsx)("p",{children:" Please enter your username and password "}),Object(te.jsxs)("label",{htmlFor:"user",children:["Username:",Object(te.jsx)("input",{type:"username",name:"user",id:"user",required:!0,autoFocus:!0,value:i,onChange:function(e){e.preventDefault(),l(e.target.value)}})]}),Object(te.jsx)("br",{}),Object(te.jsxs)("label",{htmlFor:"pass",children:["Password:",Object(te.jsx)("input",{type:"password",name:"pass",id:"pass",required:!0,value:b,onChange:function(e){e.preventDefault(),d(e.target.value)}})]}),Object(te.jsx)("br",{}),Object(te.jsx)("input",{type:"submit",value:"Submit",variant:"outlined"}),Object(te.jsxs)("label",{htmlFor:"rememberLogin",children:[" Remember me",Object(te.jsx)("input",{type:"checkbox",id:"rememberLogin",name:"rememberLogin",value:x})]})]}),Object(te.jsx)("button",{name:"next2",variant:"outlined",onClick:function(){g(!1)},children:"register"})]}),S&&Object(te.jsx)("p",{children:"Could not find a user to match input username and password."})]}),I&&Object(te.jsx)("p",{children:"loading..."}),!m&&Object(te.jsx)(Pe,{Registered:function(){g(!0)}})]})}var Me=function(){var e=Object(w.useState)(null),t=Object(F.a)(e,2),n=t[0],a=t[1];return Object(te.jsx)("div",{className:"App",children:n?Object(te.jsx)(Ue,{id:n}):Object(te.jsx)(Re,{handleLogin:a})})},Ae=n(2),Be=new(n(76).a)({uri:"ws://".concat(window.location.hostname,":8080/graphql"),options:{reconnect:!0}}),Qe=new _.HttpLink({uri:"http://".concat(window.location.hostname,":8080/graphql")}),Ge=Object(_.split)((function(e){var t=e.query,n=Object(Ae.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Be,Qe),Je=new _.ApolloClient({link:Ge,cache:new _.InMemoryCache,onError:function(e){var t=e.networkError,n=e.graphQLErrors;console.log("graphQLErrors",n),console.log("networkError",t)}});N.a.render(Object(te.jsx)(_.ApolloProvider,{client:Je,children:Object(te.jsxs)(I.a,{children:[Object(te.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),Object(te.jsx)(Me,{})]})}),document.getElementById("root"))},20:function(e,t,n){},82:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.ad4ca82f.chunk.js.map