(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t),n.d(t,"apolloClient",(function(){return st}));var a,c,s,r,i,l,u,o,j,b,d,m,h,O,g,p,x,f,v,S,C,y,k,$,N,D,I,w,_=n(2),F=n.n(_),q=n(72),L=n.n(q),U=n(27),E=(n(82),n(5)),P=(n(20),n(6)),R=F.a.createContext({user:null,refreshUser:function(){},toggleNavBar:function(){}}),M=n(11),A=Object(P.gql)(a||(a=Object(M.a)(["\n  query getUserID($username:String, $password:String){\n    getUserID(username:$username, password:$password)\n  }\n"]))),Q=Object(P.gql)(c||(c=Object(M.a)(["\n  query doesUserExist($username:String){\n    doesUserExist(username:$username)\n  }\n"]))),B=Object(P.gql)(s||(s=Object(M.a)(["\n  query getUserByID($id: String){\n    user(id: $id){\n      _id\n      name\n      username\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n      characters{\n        _id\n        name\n        campaign\n      }\n    }\n  }\n"]))),T=Object(P.gql)(r||(r=Object(M.a)(["\n  mutation addUser($name:String, $username:String, $password:String){\n    addUser(name:$name, username:$username, password:$password){\n      name\n    }\n  }\n"]))),J=(Object(P.gql)(i||(i=Object(M.a)(["\n  subscription currentUser($id:String){\n    updateUser(id:$id){\n      _id\n      name\n      permissions\n      campaigns{\n        _id\n        name\n        dm\n        currentSession\n      }\n    }\n  }\n"]))),Object(P.gql)(l||(l=Object(M.a)(["\n  query getCampaignID($name:String){\n    campaign(name:$name){\n      _id\n    }\n  }\n"]))),Object(P.gql)(u||(u=Object(M.a)(["\n  query getCampaign($id:String){\n    campaign(id:$id){\n      name\n      dm\n      characters{\n        name\n        user{\n          _id\n          name\n          username\n        }\n      }\n    }\n  }\n"])))),G=Object(P.gql)(o||(o=Object(M.a)(["\n  query getCampaignPlayers($campaign:String){\n    players(campaign:$campaign){\n      _id\n      name\n      characters{\n        name\n        campaign\n      }\n    }\n  }\n"]))),H=Object(P.gql)(j||(j=Object(M.a)(["\n  mutation addCampaign($dm:String, $name:String){\n    addCampaign(dm:$dm, name:$name){\n      _id\n    }\n  }\n"]))),z=Object(P.gql)(b||(b=Object(M.a)(["\n  mutation joinExistingCampaign($id:String, $user:String){\n      joinCampaign(id:$id, user:$user){\n        _id\n        name\n      }\n  }\n"]))),V=Object(P.gql)(d||(d=Object(M.a)(["\n  mutation leaveCampaign($campaign:String, $user:String){\n      leaveCampaign(campaign:$campaign, user:$user){\n        name\n      }\n  }\n"]))),W=Object(P.gql)(m||(m=Object(M.a)(["\n  mutation deleteCampaign($user:String, $dm:String, $campaign:String){\n    deleteCampaign(user:$user, dm:$dm, campaign:$campaign)\n  }\n"]))),Y=Object(P.gql)(h||(h=Object(M.a)(["\n  mutation renameCampaign($id:String, $name:String){\n    renameCampaign(id:$id, name:$name){\n      name\n    }\n  }\n"]))),K=Object(P.gql)(O||(O=Object(M.a)(["\n  query getCharacter($id:String){\n    character(id:$id){\n      _id\n      user{\n        _id\n      }\n      campaign\n      name\n      race\n      background\n      class\n      level\n      hp\n      cha\n      con\n      dex\n      int\n      str\n      wis\n      skills\n    }\n  }\n"]))),X=Object(P.gql)(g||(g=Object(M.a)(["\n  mutation addCharacter($user:String, $campaign:String, $name:String, $race:String, $background:String){\n    addCharacter(user:$user, campaign:$campaign, name:$name, race:$race, background:$background){\n      _id\n      name\n    }\n  }\n"]))),Z=Object(P.gql)(p||(p=Object(M.a)(["\n  mutation updateCharacterInfo($id:String, $name:String, $campaign:String){\n    updateCharacterInfo(id:$id, name:$name, campaign:$campaign){\n      _id\n      name\n    }\n  }\n"]))),ee=Object(P.gql)(x||(x=Object(M.a)(["\n  mutation updateCharacterStats($id:String, $class:String, $cha:Int, $con:Int, $dex:Int, $int:Int, $str:Int, $wis:Int){\n    updateCharacterStats(id:$id, class:$class, cha:$cha, con:$con, dex:$dex, int:$int, str:$str, wis:$wis){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),te=Object(P.gql)(f||(f=Object(M.a)(["\n  mutation updateCharacterSkills($id:String, $skills:[String]){\n    updateCharacterSkills(id:$id, skills:$skills){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),ne=Object(P.gql)(v||(v=Object(M.a)(["\n  mutation deleteCharacter($user:String, $campaign:String, $character:String){\n    deleteCharacter(user:$user, campaign:$campaign, character:$character)\n  }\n"]))),ae=Object(P.gql)(S||(S=Object(M.a)(["\n  query getClasses{\n    classes{\n      index\n      name\n    }\n  }\n"]))),ce=Object(P.gql)(C||(C=Object(M.a)(["\n  query getClass($index:String){\n    class(index:$index){\n      index\n      name\n      proficiencies{\n        index\n        name\n      }\n      proficiency_choices{\n        choose\n        from{\n          index\n          name\n          type\n          races{\n            index\n          }\n        }\n      }\n      starting_equipment_options{\n        choose\n        from{\n          equipment{\n            index\n            name\n            damage{\n              damage_dice\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),se=Object(P.gql)(y||(y=Object(M.a)(["\n  query getRaces{\n    races{\n      index\n      name\n      speed\n      age\n      alignment\n      size_description\n      language_desc\n    }\n  }\n"]))),re=(Object(P.gql)(k||(k=Object(M.a)(["\n  query currentSessionID($campaign:String){\n    getCurrentSessionID(campaign:$campaign)\n  }\n"]))),Object(P.gql)($||($=Object(M.a)(["\n  mutation createSession($campaign:String, $user:String){\n    createSession(campaign:$campaign, user:$user){\n      _id\n    }\n  }\n"])))),ie=Object(P.gql)(N||(N=Object(M.a)(["\n  mutation endSession($campaign:String, $user:String){\n    endSession(campaign:$campaign, user:$user)\n  }\n"]))),le=Object(P.gql)(D||(D=Object(M.a)(["\n  mutation changeCharacterHealth($session:String, $character:String, $hp:Int){\n    changeCharacterHealth(session:$session, character:$character, hp:$hp)\n  }\n"]))),ue=Object(P.gql)(I||(I=Object(M.a)(["\n  query currentSession($id:String){\n    session(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user{\n            _id\n          }\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),oe=Object(P.gql)(w||(w=Object(M.a)(["\n  subscription onSessionUpdate($id:String){\n    sessionUpdate(id:$id){\n      _id\n      campaign\n      characters{\n        _id\n        position\n        character{\n          user{\n            _id\n          }\n          name\n          race\n          background\n          class\n          level\n          hp\n          cha\n          con\n          dex\n          int\n          str\n          wis\n        }\n      }\n    }\n  }\n"]))),je=n(0);function be(e){window.location.pathname;var t=Object(_.useState)(!1),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(_.useState)("D"),r=Object(E.a)(s,2),i=r[0],l=r[1],u=document.querySelector(":root").style,o=Object(je.jsx)("span",{className:"nav-button",children:Object(je.jsx)("button",{onClick:function(){a?(u.setProperty("--bg-primary","var(--bg-day)"),u.setProperty("--navTextColour","#e6e6e6"),c(!1),l("D")):(u.setProperty("--bg-primary","var(--bg-night)"),u.setProperty("--navTextColour","#e6e6e6"),c(!0),l("N"))},className:"nav-link",children:i})}),j=[Object(je.jsx)("li",{className:"nav-title",children:Object(je.jsx)(U.b,{to:"/",className:"nav-link",children:Object(je.jsx)("span",{className:"nav-title-text",children:" DND20 "})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(U.b,{to:"/Campaigns",className:"nav-link",children:Object(je.jsx)("span",{className:"nav-text",children:" Campaigns "})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(U.b,{to:"/Characters",className:"nav-link",children:Object(je.jsx)("span",{className:"nav-text",children:" Characters "})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(U.b,{to:"/Play",className:"nav-link",children:Object(je.jsx)("span",{className:"nav-text",children:" Play "})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(U.b,{to:"/MyAccount",className:"nav-link",children:Object(je.jsx)("span",{className:"nav-text",children:" My Account "})})}),o];return Object(je.jsx)("nav",{className:"navbar",children:Object(je.jsx)("ul",{className:"navbar-nav",children:j})})}var de=n(13);var me=function(){var e=Object(_.useContext)(R).user,t=Object(_.useState)("Next"),n=Object(E.a)(t,2),a=n[0],c=n[1];return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("br",{}),Object(je.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(je.jsx)("br",{}),Object(je.jsx)("h1",{className:"title",children:"DnD20"}),Object(je.jsx)("button",{name:"showname",onClick:function(){c(e?e.name:"no user")},children:a}),Object(je.jsx)("p",{children:"welcome to the app, gamer"})]})},he=n(34),Oe=n(35),ge=n(14),pe=n(37),xe=n(36),fe=function(e){Object(pe.a)(n,e);var t=Object(xe.a)(n);function n(e){var a;return Object(he.a)(this,n),(a=t.call(this,e)).campaignID=a.props.campaignID,a.handleNameChange=a.handleNameChange.bind(Object(ge.a)(a)),a.submit=a.submit.bind(Object(ge.a)(a)),a.delete=a.delete.bind(Object(ge.a)(a)),a.submitted=a.submitted.bind(Object(ge.a)(a)),a.returnCampaign=a.returnCampaign.bind(Object(ge.a)(a)),a.toggleID=a.toggleID.bind(Object(ge.a)(a)),a.state={submit:!1,delete:!1,loaded:!1,campaign:null,name:"",showID:!1},a}return Object(Oe.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"submit",value:function(e){this.setState({submit:!0}),this.props.submit(e)}},{key:"delete",value:function(){this.setState({delete:!0})}},{key:"submitted",value:function(){var e=this;this.setState({submit:!1,delete:!1},(function(){e.props.back()}))}},{key:"returnCampaign",value:function(e){this.setState({campaign:e,name:e.name,loaded:!0})}},{key:"toggleID",value:function(){this.setState({showID:!this.state.showID})}},{key:"render",value:function(){if(null!=this.campaignID){var e=!1;return null!==this.state.campaign&&(e=this.props.currentUserID===this.state.campaign.dm,null!==this.state.campaign.session),Object(je.jsxs)(je.Fragment,{children:[!this.state.loaded&&!this.state.submit&&Object(je.jsx)("div",{children:Object(je.jsx)(ve,{ID:this.campaignID,return:this.returnCampaign})}),this.state.loaded&&!this.state.submit&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(je.jsxs)("h1",{className:"title",children:["Campaign: ",this.state.campaign.name]}),e&&Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("div",{children:[Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(ke,{ID:this.campaignID}),Object(je.jsx)("br",{})]}),this.state.showID?Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("p",{children:[this.campaignID,Object(je.jsx)("button",{onClick:this.toggleID,children:"x"})]})}):Object(je.jsx)("button",{onClick:this.toggleID,children:"Show ID"}),Object(je.jsx)("button",{onClick:this.delete,children:"Delete this campaign"}),Object(je.jsx)("br",{}),Object(je.jsx)("br",{}),Object(je.jsxs)("form",{className:"Form",onSubmit:this.submit,children:[Object(je.jsxs)("div",{children:[Object(je.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(je.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(je.jsx)("br",{})]}),Object(je.jsx)("input",{type:"submit",value:"Submit"})]}),Object(je.jsx)("br",{})]})})]}),!e&&Object(je.jsx)(ye,{ID:this.campaignID,back:this.props.back}),this.state.submit&&Object(je.jsx)(Se,{submitted:this.submitted,id:this.campaignID,name:this.state.name}),this.state.delete&&Object(je.jsx)(Ce,{submitted:this.submitted,dm:this.state.campaign.dm,campaignID:this.campaignID}),Object(je.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}return Object(je.jsxs)("div",{children:[Object(je.jsx)("p",{children:"Error: No Campaign"}),Object(je.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}}]),n}(F.a.Component);function ve(e){for(var t=Object(P.useQuery)(J,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error;n;)return Object(je.jsx)("p",{children:"loading..."});return c?(console.log(c),Object(je.jsx)("p",{})):(e.return(a.campaign),Object(je.jsx)("p",{children:"done"}))}function Se(e){for(var t=Object(P.useMutation)(Y),n=Object(E.a)(t,2),a=n[0],c=n[1],s=c.data,r=c.loading;r;)return Object(je.jsx)("p",{children:"loading"});return void 0===s?a({variables:{id:e.id,name:e.name}}):(console.log(s),e.submitted()),null}function Ce(e){for(var t=Object(_.useContext)(R).user,n=Object(P.useMutation)(W),a=Object(E.a)(n,2),c=a[0],s=a[1],r=s.data,i=s.loading;i;)return Object(je.jsx)("p",{children:"Loading..."});return void 0===r?(c({variables:{user:t._id,dm:e.dm,campaign:e.campaignID}}),console.log("attempted deleteCampaign")):null!=r&&(console.log("done",r),e.submitted()),null}function ye(e){for(var t=Object(_.useContext)(R).user,n=Object(P.useMutation)(V),a=Object(E.a)(n,2),c=a[0],s=a[1],r=(s.data,s.loading);r;)return Object(je.jsx)("p",{children:"Loading..."});return Object(je.jsx)("button",{onClick:function(){c({variables:{user:t._id,campaign:e.ID}}),e.back()},children:"Leave Campaign"})}function ke(e){var t=Object(_.useContext)(R).user,n=Object(P.useQuery)(G,{variables:{campaign:e.ID},notifyOnNetworkStatusChange:"true"}),a=n.data,c=n.loading,s=n.refetch,r=Object(P.useMutation)(V),i=Object(E.a)(r,2),l=i[0],u=i[1],o=(u.data,u.loading),j=Object(_.useState)([]),b=Object(E.a)(j,2),d=b[0],m=b[1];return Object(_.useEffect)((function(){(c||o)&&console.log("loading"),void 0!==a&&!1===c&&null!==a&&(console.log(a.players),null===a.players?s():m(a.players.map((function(n,a){if(n._id!==t._id){n.characters.filter((function(t){return String(t.campaign)===e.ID}))[0];return Object(je.jsxs)("button",{onClick:function(){l({variables:{user:n._id,campaign:e.ID}}),s()},children:["Remove ",n.name]})}return null}))))}),[a,c]),Object(je.jsx)(je.Fragment,{children:d})}function $e(e){var t=Object(_.useContext)(R),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=n.campaigns.map((function(t,a){return Object(je.jsx)(Ne,{campaign:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n._id},a)}));return Object(je.jsxs)(je.Fragment,{children:[0===n.campaigns.length&&Object(je.jsx)("p",{children:"You are not currently participating in any campaigns."}),0!==n.campaigns.length&&c]})}function Ne(e){return Object(je.jsxs)("div",{className:"campaign",children:[Object(je.jsx)("p",{className:"campaign-name",children:e.campaign.name},"c1"),Object(je.jsx)("ul",{children:Object(je.jsx)("li",{children:"Edit"===e.purpose&&Object(je.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign._id)},children:"..."})},"editButton")})]})}function De(e){var t=Object(_.useContext)(R).user,n=Object(_.useState)(null),a=Object(E.a)(n,2),c=a[0],s=a[1],r=Object(_.useState)(!1),i=Object(E.a)(r,2),l=i[0],u=i[1],o=Object(_.useState)(!1),j=Object(E.a)(o,2),b=j[0],d=j[1],m=Object(_.useState)(""),h=Object(E.a)(m,2),O=h[0],g=h[1],p=Object(_.useState)(!1),x=Object(E.a)(p,2),f=x[0],v=x[1],S=Object(_.useState)(!1),C=Object(E.a)(S,2),y=C[0],k=C[1],$=Object(_.useState)(!1),N=Object(E.a)($,2),D=N[0],I=N[1],w=Object(_.useState)(""),F=Object(E.a)(w,2),q=F[0],L=F[1],U=Object(_.useState)(!1),M=Object(E.a)(U,2),A=M[0],Q=M[1],B=Object(P.useMutation)(H),T=Object(E.a)(B,2),J=T[0],G=T[1],V=G.data,W=G.loading,Y=Object(P.useMutation)(z),K=Object(E.a)(Y,2),X=K[0],Z=K[1],ee=Z.data,te=Z.loading;return Object(_.useEffect)((function(){b&&f&&!W&&void 0===V&&J({variables:{dm:t._id,name:O}}),void 0!==V&&(d(!1),v(!1),u(!0),s(V.addCampaign._id))}),[V,W,J,O,f,t._id,b]),Object(_.useEffect)((function(){D&&A&&!te&&void 0===ee&&X({variables:{id:q,user:t._id}}),void 0!==ee&&(I(!1),Q(!1),u(!0),s(ee.joinCampaign._id))}),[X,ee,te,q,A,t._id,D]),Object(je.jsxs)(je.Fragment,{children:[!l&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h1",{className:"title",children:" Campaigns "}),!D&&Object(je.jsx)("button",{onClick:function(){I(!D)},children:"Join Campaign"}),D&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("input",{type:"campaign",onChange:function(e){e.preventDefault(),L(e.target.value)},value:q}),Object(je.jsx)("button",{onClick:function(){Q(!A)},children:"Join"}),Object(je.jsx)("button",{onClick:function(){I(!D)},children:"x"})]}),!b&&!f&&Object(je.jsx)("button",{onClick:function(){d(!b)},children:"+"}),b&&!f&&Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("form",{className:"Form",onSubmit:function(e){e.preventDefault(),v(!f)},children:[Object(je.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(je.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),g(e.target.value)},value:O})]}),Object(je.jsx)("input",{type:"submit",value:"Submit"}),Object(je.jsx)("button",{onClick:function(){d(!b)},children:"x"})]})}),Object(je.jsx)("br",{}),Object(je.jsx)("br",{}),Object(je.jsx)($e,{needsRefresh:y,refreshed:function(){k(!1)},changeSelected:function(e){s(e),u(!0)},purpose:"Edit"})]}),l&&Object(je.jsx)(fe,{currentUserID:t._id,campaignID:c,submit:function(){},back:function(){s(null),u(!1),k(!0)}})]})}function Ie(e,t){var n=[];if(void 0!==e[0])if(void 0!==e[0].index)for(var a=0;a<e.length;a++)n.push(Object(je.jsx)("option",{value:e[a].index,children:e[a].name},a));else if(void 0!==e[0]._id)for(var c=0;c<e.length;c++)n.push(Object(je.jsx)("option",{value:e[c]._id,children:e[c].name},c));return n}function we(e){return 0<=_e(e)&&_e(e)<=25}function _e(e){var t=25;return e.map((function(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:t-=e-8;break;case 15:t-=8;break;case 16:t-=10;break;case 17:t-=13;break;case 18:t-=18;break;default:t-=100}})),t}function Fe(e){var t=e.currentUser,n=Object(_.useState)(null),a=Object(E.a)(n,2),c=a[0],s=a[1],r=Object(P.useQuery)(K,{variables:{id:e.characterID},fetchPolicy:"network-only"}),i=r.loading,l=r.data,u=r.refetch;for(Object(_.useEffect)((function(){if(!1===i&&void 0!==l&&s(l.character),i)return Object(je.jsx)("p",{children:"Loading.."})}),[l,i,e.characterID]);i;)return Object(je.jsx)("p",{children:"Loading..."});return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("button",{className:"backButton",onClick:e.back,children:"Back"}),!1===i&&(null!==c?Object(je.jsx)(Le,{user:t,character:c,reload:u,back:e.back}):Object(je.jsx)(qe,{user:t,back:e.back}))]})}function qe(e){var t=Object(_.useState)(""),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(_.useState)(""),r=Object(E.a)(s,2),i=r[0],l=r[1],u=Object(_.useState)(""),o=Object(E.a)(u,2),j=o[0],b=o[1],d=Object(_.useState)(""),m=Object(E.a)(d,2),h=m[0],O=m[1],g=Object(P.useQuery)(se),p=g.loading,x=g.data,f=Object(P.useMutation)(X),v=Object(E.a)(f,2),S=v[0],C=v[1],y=C.loading,k=C.data;for(Object(_.useEffect)((function(){void 0!==e.user.campaigns[0]&&O(e.user.campaigns[0]._id),void 0!==x&&void 0!==x.races[0]&&b(x.races[0].index)}),[x,e.user.campaigns]);p||y;)return Object(je.jsx)("p",{children:"Loading..."});return void 0!==k&&e.back(),Object(je.jsxs)("form",{onSubmit:function(){console.log(e.user._id,h,a,j,i),S({variables:{user:e.user._id,campaign:h,name:a,race:j,background:i}})},children:[Object(je.jsx)("input",{type:"submit"}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(je.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),c(e.target.value)},value:a})]}),Object(je.jsx)(Ae,{id:"campaign",campaigns:e.user.campaigns,changeCampaign:O}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"bg",className:"tbLabel",children:["Background Info / Lore:",Object(je.jsx)("textarea",{id:"bg",name:"bg",onChange:function(e){e.preventDefault(),l(e.target.value)},value:i,rows:"4",cols:"50",maxLength:"500"})]}),Object(je.jsx)("br",{}),Object(je.jsx)(Me,{id:"race",races:x.races,changeRace:b}),Object(je.jsx)("br",{})]})}function Le(e){for(var t=Object(P.useQuery)(ae),n=t.loading,a=t.data,c=Object(_.useState)(0),s=Object(E.a)(c,2),r=s[0],i=s[1];n;)return Object(je.jsx)("p",{children:"Loading..."});var l=Object(je.jsxs)(je.Fragment,{children:[[0===r&&Object(je.jsx)(Ue,{character:e.character,classes:a.classes,back:e.back}),1===r&&Object(je.jsx)(Ee,{reload:e.reload,character:e.character})],Object(je.jsxs)("p",{className:"Form",children:["Page:",Object(je.jsx)("button",{onClick:function(){i(0)},children:"1"}),Object(je.jsx)("button",{onClick:function(){i(1)},children:"2"})]})]});return Object(je.jsxs)("div",{children:[Object(je.jsx)("h2",{children:e.character.name}),Object(je.jsx)("div",{className:"Form",children:l})]})}function Ue(e){var t=Object(_.useContext)(R).user,n=e.character,a=Object(_.useState)(n.campaign),c=Object(E.a)(a,2),s=c[0],r=c[1],i=Object(_.useState)(n.class),l=Object(E.a)(i,2),u=l[0],o=l[1],j=Object(_.useState)(n.str),b=Object(E.a)(j,2),d=b[0],m=b[1],h=Object(_.useState)(n.dex),O=Object(E.a)(h,2),g=O[0],p=O[1],x=Object(_.useState)(n.con),f=Object(E.a)(x,2),v=f[0],S=f[1],C=Object(_.useState)(n.int),y=Object(E.a)(C,2),k=y[0],$=y[1],N=Object(_.useState)(n.wis),D=Object(E.a)(N,2),I=D[0],w=D[1],F=Object(_.useState)(n.cha),q=Object(E.a)(F,2),L=q[0],U=q[1],M=Object(_.useState)(!1),A=Object(E.a)(M,2),Q=A[0],B=A[1],T=Object(_.useState)(n.name),J=Object(E.a)(T,2),G=J[0],H=J[1],z=Object(P.useMutation)(ne,{variables:{character:n._id,user:n.user._id,campaign:n.campaign}}),V=Object(E.a)(z,2),W=V[0],Y=V[1],K=Y.loading,X=Y.data,te=Object(P.useMutation)(Z,{variables:{id:n._id,name:G,campaign:s}}),ae=Object(E.a)(te,2),ce=ae[0],se=ae[1],re=se.loading,ie=se.data,le=Object(P.useMutation)(ee,{variables:{id:n._id,class:u,cha:parseInt(L),con:parseInt(v),str:parseInt(d),dex:parseInt(g),int:parseInt(k),wis:parseInt(I)}}),ue=Object(E.a)(le,2),oe=ue[0],be=ue[1],de=be.loading,me=be.data,he=Object(_.useState)(!1),Oe=Object(E.a)(he,2),ge=Oe[0],pe=Oe[1],xe=[d,g,v,k,I,L],fe=Object(_.useState)(_e(xe)),ve=Object(E.a)(fe,2),Se=ve[0],Ce=ve[1];for(Object(_.useEffect)((function(){void 0!==e.classes[0]&&o(e.classes[0].index)}),[e.classes]);K||re||de;)return K&&console.log(n._id,n.user._id,n.campaign),Object(je.jsx)("p",{children:"loading"});return void 0===X&&void 0===ie&&void 0===me||e.back(),Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("div",{children:Object(je.jsx)("button",{onClick:W,children:"Delete Character"})}),Q?Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("form",{onSubmit:ce,children:[Object(je.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(je.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),H(e.target.value)},value:G})]}),Object(je.jsx)(Ae,{id:"campaign",current:s,campaigns:t.campaigns,changeCampaign:r}),Object(je.jsx)("input",{type:"submit"}),Object(je.jsx)("button",{onClick:function(){B(!Q)},children:"Cancel"})]})}):Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("button",{onClick:function(){B(!Q)},children:"Rename/ChangeCampaign"}),Object(je.jsx)("br",{})]}),Object(je.jsxs)("form",{className:"Form",onSubmit:function(){we([d,g,v,k,I,L])?(oe(),pe(!1)):pe(!0)},children:[Object(je.jsx)("input",{type:"submit"}),Object(je.jsx)("br",{}),Object(je.jsx)(Re,{id:"class",current:u,classes:e.classes,changeClass:o}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"str",className:"tbLabel",children:["Str:",Object(je.jsx)("input",{type:"number",id:"str",name:"str",min:"1",max:"20",required:!0,onChange:function(e){var t=[d+(Number.parseInt(e.target.value)-d),g,v,k,I,L];e.preventDefault(),we(t)?(m(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=d},value:d})]}),Object(je.jsxs)("label",{htmlFor:"dex",className:"tbLabel",children:["Dex:",Object(je.jsx)("input",{type:"number",id:"dex",name:"dex",min:"1",max:"20",required:!0,onChange:function(e){var t=[d,g+(Number.parseInt(e.target.value)-g),v,k,I,L];e.preventDefault(),we(t)?(p(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=g},value:g})]}),Object(je.jsxs)("label",{htmlFor:"con",className:"tbLabel",children:["Con:",Object(je.jsx)("input",{type:"number",id:"con",name:"con",min:"1",max:"20",required:!0,onChange:function(e){var t=[d,g,v+(Number.parseInt(e.target.value)-v),k,I,L];e.preventDefault(),we(t)?(S(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=v},value:v})]}),Object(je.jsxs)("label",{htmlFor:"int",className:"tbLabel",children:["Int:",Object(je.jsx)("input",{type:"number",id:"int",name:"int",min:"1",max:"20",required:!0,onChange:function(e){var t=[d,g,v,k+(Number.parseInt(e.target.value)-k),I,L];e.preventDefault(),we(t)?($(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=k},value:k})]}),Object(je.jsxs)("label",{htmlFor:"wis",className:"tbLabel",children:["Wis:",Object(je.jsx)("input",{type:"number",id:"wis",name:"wis",min:"1",max:"20",required:!0,onChange:function(e){var t=[d,g,v,k,I+(Number.parseInt(e.target.value)-I),L];e.preventDefault(),we(t)?(w(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=I},value:I})]}),Object(je.jsxs)("label",{htmlFor:"cha",className:"tbLabel",children:["Cha:",Object(je.jsx)("input",{type:"number",id:"cha",name:"cha",min:"1",max:"20",required:!0,onChange:function(e){var t=[d,g,v,k,I,L+(Number.parseInt(e.target.value)-L)];e.preventDefault(),we(t)?(U(Number.parseInt(e.target.value)),Ce(_e(t))):e.target.innerText=L},value:L})]}),Object(je.jsxs)("p",{children:[Se," points remaining"]})]}),ge&&Object(je.jsx)("p",{children:"bad stats"})]})}function Ee(e){console.log(e.character.skills);var t=Object(P.useQuery)(ce,{variables:{index:e.character.class}}),n=t.data,a=t.loading,c=Object(_.useState)([]),s=Object(E.a)(c,2),r=s[0],i=s[1],l=Object(_.useState)([]),u=Object(E.a)(l,2),o=u[0],j=u[1],b=Object(_.useState)(!1),d=Object(E.a)(b,2),m=d[0],h=d[1];for(Object(_.useEffect)((function(){null!==n&&void 0!==n&&!1===a&&!1===m&&(i(n.class.proficiencies.map((function(e,t){return 0===t?e.index:", "+e.index}))),j(n.class.proficiency_choices.map((function(t,a){return Object(je.jsx)(Pe,{defaults:n.class.proficiencies.map((function(e){return e.index})),character:e.character,options:n.class.proficiency_choices[a],reload:e.reload})}))),h(!0))}),[n,a,e,e.character,e.classes,m]);a;)return Object(je.jsx)("p",{children:"Loading data..."});return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h3",{children:"Proficiencies"}),o,Object(je.jsxs)("p",{children:["Defaults: ",r]})]})}function Pe(e){var t=Object(_.useState)(e.options.from.map((function(t,n){return e.character.skills.includes(t.index)?t.index:null}))),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(_.useState)(a.filter((function(e){return null!==e})).length),r=Object(E.a)(s,2),i=r[0],l=r[1],u=Object(P.useMutation)(te,{variables:{id:e.character._id,skills:Array.prototype.concat(e.defaults,a.filter((function(e){return null!==e})))}}),o=Object(E.a)(u,2),j=o[0],b=(o[1].data,e.options.from.map((function(t,n){return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("input",{type:"checkbox",defaultChecked:e.character.skills.includes(t.index),name:n,id:t.index,onChange:function(t){!function(t){var n=[],s=i;t.checked?i+1<=e.options.choose?(s++,n=a.map((function(e,n){return n===Number.parseInt(t.name)?t.id:e}))):(t.checked=!1,n=a):(s--,n=a.map((function(e,n){return n===Number.parseInt(t.name)?null:e})));c(n),l(s)}(t.target)}}),Object(je.jsx)("label",{for:n,children:t.name})]})})));return"Skills"===e.options.from[0].type&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("p",{children:["Choose ",e.options.choose,":"]}),Object(je.jsxs)("form",{onSubmit:function(t){t.preventDefault(),j(),e.reload()},children:[b,Object(je.jsx)("input",{type:"submit"})]})]})}function Re(e){var t=Ie(e.classes);return Object(je.jsxs)("label",{htmlFor:"class",className:"tbLabel",children:["Class:",Object(je.jsx)("select",{id:"classes",required:!0,name:"classes",onChange:function(t){e.changeClass(e.classes[t.target.selectedIndex].index)},defaultValue:e.current,children:t})]})}function Me(e){var t=Object(_.useState)(0),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Ie(e.races);return Object(je.jsxs)("div",{children:[Object(je.jsxs)("label",{htmlFor:"races",required:!0,className:"tbLabel",children:["Race:",Object(je.jsx)("select",{id:"races",name:"races",selectedIndex:"0",onChange:function(t){e.changeRace(e.races[t.target.selectedIndex].index),c(t.target.selectedIndex)},children:s})]}),Object(je.jsx)("p",{children:e.races[a].alignment})]})}function Ae(e){var t=Ie(e.campaigns);return 1===e.campaigns.length&&e.changeCampaign(e.campaigns[0]._id),Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("label",{htmlFor:"campaigns",className:"tbLabel",children:["Campaign:",Object(je.jsx)("select",{id:"campaigns",name:"campaigns",selectedIndex:"0",required:!0,onChange:function(t){e.changeCampaign(e.campaigns[t.target.selectedIndex]._id)},defaultValue:e.current,children:t})]})})}function Qe(e){var t=Object(_.useContext)(R),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var c=Object(P.useMutation)(re),s=Object(E.a)(c,2),r=s[0],i=(s[1].data,Object(P.useMutation)(ie)),l=Object(E.a)(i,2),u=l[0],o=(l[1].data,n),j=o.characters.map((function(t,a){var c=o.campaigns.find((function(e){return e._id===t.campaign}));return Object(je.jsx)(Be,{character:t,changeSelected:e.changeSelected,purpose:e.purpose,currentUser:n,campaign:c},a)}));return"Play"===e.purpose&&j.push(o.campaigns.map((function(e){return Object(je.jsxs)(je.Fragment,{children:[n._id===e.dm&&null===e.currentSession&&Object(je.jsxs)("button",{onClick:function(){return r({variables:{campaign:e._id,user:n._id}})},children:["Begin ",e.name]}),n._id===e.dm&&null!==e.currentSession&&Object(je.jsxs)("button",{onClick:function(){return u({variables:{campaign:e._id,user:n._id}})},children:["End ",e.name," session"]})]})}))),Object(je.jsxs)("div",{children:["Play"===e.purpose&&Object(je.jsx)("button",{onClick:function(){a()},children:"Refresh"}),0===n.characters.length&&Object(je.jsx)("p",{children:"You do not currently have any characters."}),0!==n.campaigns.length&&j]})}function Be(e){return console.log(e.campaign),Object(je.jsxs)("div",{className:"character",children:[Object(je.jsx)("p",{className:"character-name",children:e.character.name},"c1"),Object(je.jsx)("ul",{children:Object(je.jsxs)("li",{children:["Edit"===e.purpose&&Object(je.jsx)("button",{onClick:function(){return e.changeSelected(e.character._id)},children:"Edit"}),"Play"===e.purpose&&void 0!==e.campaign&&null!==e.campaign.currentSession&&Object(je.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign.currentSession)},children:"Play"})]},"mainButton")})]})}var Te=function(e){Object(pe.a)(n,e);var t=Object(xe.a)(n);function n(e){var a;return Object(he.a)(this,n),(a=t.call(this,e)).state={selected:null,chosen:!1,needsRefresh:!1,needsSubmit:!1},a.handleEditSubmit=a.handleEditSubmit.bind(Object(ge.a)(a)),a.changeSelected=a.changeSelected.bind(Object(ge.a)(a)),a.clearSelected=a.clearSelected.bind(Object(ge.a)(a)),a.wantsNew=a.wantsNew.bind(Object(ge.a)(a)),a.refreshed=a.refreshed.bind(Object(ge.a)(a)),a}return Object(Oe.a)(n,[{key:"handleEditSubmit",value:function(e){e.preventDefault()}},{key:"changeSelected",value:function(e){this.setState({selected:e,chosen:!0})}},{key:"clearSelected",value:function(){this.setState({selected:null,chosen:!1,needsRefresh:!0})}},{key:"wantsNew",value:function(){this.setState({chosen:!0})}},{key:"refreshed",value:function(){this.setState({needsRefresh:!1})}},{key:"render",value:function(){var e=this.context.user;return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h1",{className:"title",children:" Characters "}),!this.state.chosen&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("button",{onClick:this.wantsNew,children:"New Character"}),Object(je.jsx)(Qe,{needsRefresh:this.state.needsRefresh,refreshed:this.refreshed,changeSelected:this.changeSelected,purpose:"Edit"})]}),this.state.chosen&&Object(je.jsx)(Fe,{currentUser:e,characterID:this.state.selected,submit:this.handleEditSubmit,back:this.clearSelected})]})}}]),n}(F.a.Component);function Je(e){var t=Object(_.useContext)(R).user,n=e.session,a=n.characters.map((function(e,a){return Object(je.jsx)(Ge,{character:e,sessionID:n._id,currentUser:t._id},a)}));return Object(je.jsxs)(je.Fragment,{children:[0===n.characters.length&&Object(je.jsx)("p",{children:"No characters in this party."}),0!==n.characters.length&&a]})}function Ge(e){var t=e.character.character,n=Object(P.useMutation)(le,{variables:{session:e.sessionID,character:e.character._id}}),a=Object(E.a)(n,2),c=a[0];a[1].data;return Object(je.jsxs)("div",{className:"campaign",children:[Object(je.jsx)("p",{className:"campaign-name",children:t.name},"c1"),Object(je.jsx)("ul",{children:Object(je.jsxs)("li",{children:[Object(je.jsx)("p",{children:t.hp}),t.user._id===e.currentUser&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("button",{onClick:function(){c({variables:{hp:t.hp+1}})},children:"+"}),Object(je.jsx)("button",{onClick:function(){c({variables:{hp:t.hp-1}})},children:"-"})]})]},"hp")})]})}function He(e){Object(_.useContext)(R).user;var t=Object(_.useState)(null),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(_.useState)(!1),r=Object(E.a)(s,2),i=r[0],l=r[1],u=Object(_.useState)(!0),o=Object(E.a)(u,2),j=o[0],b=o[1];return Object(je.jsx)("header",{className:"App-header",children:null!==a?Object(je.jsx)(ze,{sessionID:a,needsRefetch:j,refetched:function(){b(!1)}}):Object(je.jsx)(Qe,{needsRefresh:i,refreshed:function(){l(!0)},changeSelected:c,purpose:"Play"})})}function ze(e){var t=Object(P.useQuery)(ue,{variables:{id:e.sessionID}}),n=t.data,a=t.loading,c=t.refetch,s=Object(P.useSubscription)(oe,{variables:{id:e.sessionID}}),r=s.data,i=s.loading,l=Object(_.useState)(void 0),u=Object(E.a)(l,2),o=u[0],j=u[1];return Object(_.useEffect)((function(){e.needsRefetch&&(c(),e.refetched()),void 0===r?(a&&console.log("loading"),void 0!==n&&(console.log(n.session),j(n.session))):(console.log(r.sessionUpdate),j(r.sessionUpdate))}),[a,n,i,r,c,e]),Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)("h2",{children:"Play the game"}),void 0!==o?Object(je.jsx)("div",{className:"play",children:Object(je.jsx)(Je,{session:o})}):Object(je.jsx)("p",{children:"No characters in this party."})]})}function Ve(e){var t=Object(_.useContext)(R).user;return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("div",{children:["Name: ",t.name]}),Object(je.jsxs)("div",{children:["Username: ",t.username]}),Object(je.jsxs)("div",{children:["Campaigns participated in: ",t.campaigns.length," (DM of ",t.campaigns.filter((function(e){return e.dm===t._id})).length,")"]}),Object(je.jsxs)("div",{children:["Characters: ",t.characters.length]})]})}Te.contextType=R;var We=function(e){return Object(je.jsx)("header",{className:"App-header",children:Object(je.jsxs)(de.c,{children:[" ",Object(je.jsx)(de.a,{exact:!0,path:"/",component:me}),Object(je.jsx)(de.a,{exact:!0,path:"/Campaigns",component:De}),Object(je.jsx)(de.a,{exact:!0,path:"/Characters",component:Te}),Object(je.jsx)(de.a,{exact:!0,path:"/Play",component:He}),Object(je.jsx)(de.a,{exact:!0,path:"/MyAccount",component:Ve})]})})};function Ye(e){for(var t=Object(P.useQuery)(B,{variables:{id:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),n=t.loading,a=t.data,c=t.error,s=t.refetch,r=t.networkStatus;r===P.NetworkStatus.refetch;)return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(be,{currentUser:a.user}),Object(je.jsx)("header",{children:Object(je.jsx)("p",{children:"Retrieving your data..."})})]});for(;n;)return Object(je.jsx)("header",{children:Object(je.jsx)("p",{children:"Loading..."})});if(c)return Object(je.jsx)("p",{children:"There was an error. Please refresh the page and try again."});if(void 0!==a){var i={user:a.user,refreshUser:s};return Object(je.jsxs)(je.Fragment,{children:[Object(je.jsx)(be,{currentUser:a.user}),Object(je.jsx)(R.Provider,{value:i,children:Object(je.jsx)(We,{})})]})}}function Ke(e){for(var t=Object(P.useQuery)(Q,{variables:{username:e.username}},{fetchPolicy:"network-only"}),n=t.data,a=t.loading,c=Object(P.useMutation)(T),s=Object(E.a)(c,2),r=s[0],i=s[1],l=i.data,u=i.loading;a||u;)return console.log("loading"),Object(je.jsx)("p",{children:"Loading..."});if(console.log(n.getUserID),void 0!==n)if(!1!==n.doesUserExist||a){if(!0===n.doesUserExist&&!a)return console.log("user already exists",n.getUserID),Object(je.jsx)("p",{children:"Error: Username already exists, try again"})}else if(console.log("user doesn't already exist"),void 0===l)console.log("adding user"),r({variables:{name:e.name,email:e.email,username:e.username,password:e.password}});else if(null!=l)return console.log(l),Object(je.jsx)(je.Fragment,{children:Object(je.jsxs)("p",{children:["Welcome, ",e.name]})});return Object(je.jsx)("p",{})}var Xe=function(e){Object(pe.a)(n,e);var t=Object(xe.a)(n);function n(e){var a;return Object(he.a)(this,n),(a=t.call(this,e)).Registered=a.props.Registered,a.handleNameChange=a.handleNameChange.bind(Object(ge.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(ge.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(ge.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(ge.a)(a)),a.handleRegisterAttempt=a.handleRegisterAttempt.bind(Object(ge.a)(a)),a.state={badForm:!1,registered:!1,name:"",email:"",username:"",password:""},a}return Object(Oe.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleRegisterAttempt",value:function(e){e.preventDefault(),this.state.name&&this.state.email&&this.state.username&&this.state.password?this.setState({registered:!0}):this.setState({badForm:!0})}},{key:"render",value:function(){return Object(je.jsxs)(je.Fragment,{children:[!this.state.registered&&Object(je.jsxs)("div",{children:[Object(je.jsx)("img",{src:"images/Nooth_DnD.png",width:"300",alt:"logo"}),Object(je.jsx)("h1",{className:"title",children:"Sign Up"}),Object(je.jsxs)("form",{className:"Form",onSubmit:this.handleRegisterAttempt,children:[Object(je.jsxs)("label",{htmlFor:"fullname",className:"tbLabel",children:["Full Name:",Object(je.jsx)("input",{type:"name",id:"fullname",name:"fullname",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"email",className:"tbLabel",name:"tbLabel",children:["Email:",Object(je.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:this.handleEmailChange,value:this.state.email})]}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"username",className:"tbLabel",name:"tbLabel",children:["Username:",Object(je.jsx)("input",{type:"username",id:"username",name:"username",required:!0,onChange:this.handleUsernameChange,value:this.state.username})]}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"password",className:"tbLabel",name:"tbLabel",children:["Password:",Object(je.jsx)("input",{type:"password",id:"password",name:"password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})]}),Object(je.jsx)("br",{}),Object(je.jsx)("input",{type:"submit",value:"Submit"})]}),Object(je.jsx)("br",{})]}),this.state.registered&&Object(je.jsx)(Ke,{name:this.state.name,email:this.state.email,username:this.state.username,password:this.state.password}),this.state.badForm&&Object(je.jsx)("p",{children:"Please make sure all boxes are filled in"}),Object(je.jsx)("button",{onClick:this.Registered,name:"next",variant:"outlined",children:"Go back to login"})]})}}]),n}(F.a.Component);function Ze(e){var t=Object(_.useState)(null),n=Object(E.a)(t,2),a=n[0],c=n[1],s=Object(_.useState)(""),r=Object(E.a)(s,2),i=r[0],l=r[1],u=Object(_.useState)(""),o=Object(E.a)(u,2),j=o[0],b=o[1],d=Object(_.useState)(!0),m=Object(E.a)(d,2),h=m[0],O=m[1],g=Object(_.useState)(!1),p=Object(E.a)(g,2),x=p[0],f=(p[1],Object(_.useState)(!1)),v=Object(E.a)(f,2),S=v[0],C=v[1],y=Object(P.useLazyQuery)(A,{fetchPolicy:"network-only"}),k=Object(E.a)(y,2),$=k[0],N=k[1],D=N.data,I=N.loading,w=N.called;return Object(_.useEffect)((function(){I||null===a||e.handleLogin(a),!I&&w&&null===a&&(void 0!==D?c(D.getUserID):C(!0))}),[I,w,a,D,e]),Object(je.jsxs)("header",{className:"App-header",children:[h&&Object(je.jsxs)(je.Fragment,{children:[Object(je.jsxs)("div",{children:[Object(je.jsxs)("form",{id:"Form",className:"Form",onSubmit:function(e){e.preventDefault(),$({variables:{username:i,password:j}})},children:[Object(je.jsx)("p",{children:" Please enter your username and password "}),Object(je.jsxs)("label",{htmlFor:"user",children:["Username:",Object(je.jsx)("input",{type:"username",name:"user",id:"user",required:!0,autoFocus:!0,value:i,onChange:function(e){e.preventDefault(),l(e.target.value)}})]}),Object(je.jsx)("br",{}),Object(je.jsxs)("label",{htmlFor:"pass",children:["Password:",Object(je.jsx)("input",{type:"password",name:"pass",id:"pass",required:!0,value:j,onChange:function(e){e.preventDefault(),b(e.target.value)}})]}),Object(je.jsx)("br",{}),Object(je.jsx)("input",{type:"submit",value:"Submit",variant:"outlined"}),Object(je.jsxs)("label",{htmlFor:"rememberLogin",children:[" Remember me",Object(je.jsx)("input",{type:"checkbox",id:"rememberLogin",name:"rememberLogin",value:x})]})]}),Object(je.jsx)("button",{name:"next2",variant:"outlined",onClick:function(){O(!1)},children:"register"})]}),S&&Object(je.jsx)("p",{children:"Could not find a user to match input username and password."})]}),I&&Object(je.jsx)("p",{children:"loading..."}),!h&&Object(je.jsx)(Xe,{Registered:function(){O(!0)}})]})}var et=function(){var e=Object(_.useState)(null),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(je.jsx)("div",{className:"App",children:n?Object(je.jsx)(Ye,{id:n}):Object(je.jsx)(Ze,{handleLogin:a})})},tt=n(3),nt=new(n(76).a)({uri:"ws://".concat(window.location.hostname,":8080/graphql"),options:{reconnect:!0}}),at=new P.HttpLink({uri:"http://".concat(window.location.hostname,":8080/graphql")}),ct=Object(P.split)((function(e){var t=e.query,n=Object(tt.p)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),nt,at),st=new P.ApolloClient({link:ct,cache:new P.InMemoryCache,onError:function(e){var t=e.networkError,n=e.graphQLErrors;console.log("graphQLErrors",n),console.log("networkError",t)}});L.a.render(Object(je.jsx)(P.ApolloProvider,{client:st,children:Object(je.jsxs)(U.a,{children:[Object(je.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),Object(je.jsx)(et,{})]})}),document.getElementById("root"))},20:function(e,t,n){},82:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.d725e896.chunk.js.map