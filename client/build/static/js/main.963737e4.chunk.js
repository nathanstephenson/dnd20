(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},77:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t),n.d(t,"apolloClient",(function(){return we}));var a,s,r,c,i,l,d,o,u,b,h,j,m,g,O,p,x,v=n(3),f=n.n(v),S=n(69),w=n.n(S),C=n(30),N=(n(77),n(18)),y=n(19),k=n(5),L=n(21),$=n(20),I=(n(29),n(6)),D=f.a.createContext({user:null,refreshUser:function(){},toggleNavBar:function(){}}),F=n(14),q=(Object(I.gql)(a||(a=Object(F.a)(["\n  query getAllUsers{\n    users {\n      name\n      username\n      password\n    }\n  }\n"]))),Object(I.gql)(s||(s=Object(F.a)(["\n  query getUser($username:String, $password:String){\n    user(username: $username, password: $password){\n      _id\n      name\n      campaigns{\n        _id\n        name\n        dm\n      }\n      characters{\n        _id\n        name\n      }\n    }\n  }\n"])))),R=(Object(I.gql)(r||(r=Object(F.a)(["\n  query getUserByID($_id: String){\n    userByID(_id: $_id){\n      name\n      permissions\n    }\n  }\n"]))),Object(I.gql)(c||(c=Object(F.a)(["\n  mutation addUser($name:String, $username:String, $password:String){\n    addUser(name:$name, username:$username, password:$password){\n      name\n    }\n  }\n"])))),_=(Object(I.gql)(i||(i=Object(F.a)(["\n  subscription currentUser($id:String){\n    updateUser(id:$id){\n      _id\n      name\n      permissions\n      campaigns{\n        _id\n        name\n        dm\n      }\n    }\n  }\n"]))),Object(I.gql)(l||(l=Object(F.a)(["\n  query getCampaignID($name:String){\n    campaign(name:$name){\n      _id\n    }\n  }\n"]))),Object(I.gql)(d||(d=Object(F.a)(["\n  query getCampaign($id:String){\n    campaign(id:$id){\n      name\n      dm\n    }\n  }\n"])))),U=Object(I.gql)(o||(o=Object(F.a)(["\n  mutation addCampaign($dm:String, $name:String){\n    addCampaign(dm:$dm, name:$name){\n      _id\n    }\n  }\n"]))),E=Object(I.gql)(u||(u=Object(F.a)(["\n  mutation deleteCampaign($user:String, $dm:String, $campaign:String){\n    deleteCampaign(user:$user, dm:$dm, campaign:$campaign)\n  }\n"]))),A=Object(I.gql)(b||(b=Object(F.a)(["\n  mutation renameCampaign($id:String, $name:String){\n    renameCampaign(id:$id, name:$name){\n      name\n    }\n  }\n"]))),P=Object(I.gql)(h||(h=Object(F.a)(["\n  query getCharacter($id:String){\n    character(id:$id){\n      _id\n      user\n      campaign\n      name\n      race\n      background\n      class\n      level\n      hp\n      cha\n      con\n      dex\n      int\n      str\n      wis\n    }\n  }\n"]))),B=Object(I.gql)(j||(j=Object(F.a)(["\n  mutation addCharacter($user:String, $campaign:String, $name:String, $race:String, $background:String){\n    addCharacter(user:$user, campaign:$campaign, name:$name, race:$race, background:$background){\n      _id\n      name\n    }\n  }\n"]))),G=Object(I.gql)(m||(m=Object(F.a)(["\n  mutation updateCharacterInfo($id:String, $name:String, $campaign:String){\n    updateCharacterInfo(id:$id, name:$name, campaign:$campaign){\n      _id\n      name\n    }\n  }\n"]))),M=Object(I.gql)(g||(g=Object(F.a)(["\n  mutation updateCharacterStats($id:String, $class:String, $cha:Int, $con:Int, $dex:Int, $int:Int, $str:Int, $wis:Int){\n    updateCharacterStats(id:$id, class:$class, cha:$cha, con:$con, dex:$dex, int:$int, str:$str, wis:$wis){\n      _id\n      campaign\n      name\n    }\n  }\n"]))),Q=Object(I.gql)(O||(O=Object(F.a)(["\n  mutation deleteCharacter($user:String, $campaign:String, $character:String){\n    deleteCharacter(user:$user, campaign:$campaign, character:$character)\n  }\n"]))),W=Object(I.gql)(p||(p=Object(F.a)(["\n  query getClasses{\n    classes{\n      index\n      name\n    }\n  }\n"]))),H=Object(I.gql)(x||(x=Object(F.a)(["\n  query getRaces{\n    races{\n      index\n      name\n      speed\n      age\n      alignment\n      size_description\n      language_desc\n    }\n  }\n"]))),T=n(0);function J(e){window.location.pathname;var t=[Object(T.jsx)(C.b,{to:"/",className:"navLink-home",children:Object(T.jsx)("h3",{children:" DND20 "})}),Object(T.jsx)(C.b,{to:"/Campaigns",className:"navLink",children:Object(T.jsx)("p",{children:" Campaigns "})}),Object(T.jsx)(C.b,{to:"/Characters",className:"navLink",children:Object(T.jsx)("p",{children:" Characters "})}),Object(T.jsx)(C.b,{className:"navLink",children:Object(T.jsx)("p",{children:" Play "})}),Object(T.jsx)(C.b,{className:"navLink",children:Object(T.jsx)("p",{children:" My Account "})})];return Object(T.jsx)("nav",{className:"navbar",children:t})}var Y=n(12),z=n(8);var K=function(){var e=Object(v.useContext)(D).user,t=Object(v.useState)("Next"),n=Object(z.a)(t,2),a=n[0],s=n[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("br",{}),Object(T.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(T.jsx)("br",{}),Object(T.jsx)("h1",{className:"title",children:"DnD20"}),Object(T.jsx)("button",{name:"showpong",onClick:function(){s(e?e.name:"no user")},children:a}),Object(T.jsx)("p",{children:"welcome to the app, gamer"})]})},V=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).campaignID=a.props.campaignID,a.handleNameChange=a.handleNameChange.bind(Object(k.a)(a)),a.submit=a.submit.bind(Object(k.a)(a)),a.delete=a.delete.bind(Object(k.a)(a)),a.submitted=a.submitted.bind(Object(k.a)(a)),a.returnCampaign=a.returnCampaign.bind(Object(k.a)(a)),a.state={submit:!1,delete:!1,loaded:!1,campaign:null,name:""},a}return Object(y.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"submit",value:function(e){this.setState({submit:!0}),this.props.submit(e)}},{key:"delete",value:function(){this.setState({delete:!0})}},{key:"submitted",value:function(){var e=this;this.setState({submit:!1,delete:!1},(function(){e.props.back()}))}},{key:"returnCampaign",value:function(e){console.log("selected campaign:",e),this.setState({campaign:e,name:e.name,loaded:!0})}},{key:"render",value:function(){if(null!=this.campaignID){var e=!1;return null!==this.state.campaign&&(e=this.props.currentUserID===this.state.campaign.dm),Object(T.jsxs)(T.Fragment,{children:[!this.state.loaded&&!this.state.submit&&Object(T.jsx)("div",{children:Object(T.jsx)(X,{ID:this.campaignID,return:this.returnCampaign})}),this.state.loaded&&!this.state.submit&&Object(T.jsxs)("div",{children:[Object(T.jsx)("img",{src:"images/Nooth_DnD.png",className:"App-logo",alt:"logo"}),Object(T.jsx)("h1",{className:"title",children:"Edit Campaign"}),Object(T.jsx)("button",{onClick:this.delete,children:"Delete this campaign"}),Object(T.jsxs)("form",{className:"Form",onSubmit:this.submit,children:[e&&Object(T.jsxs)("div",{children:[Object(T.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(T.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(T.jsx)("br",{})]}),Object(T.jsx)("input",{type:"submit",value:"Submit"})]}),Object(T.jsx)("br",{})]}),this.state.submit&&Object(T.jsx)(Z,{submitted:this.submitted,id:this.campaignID,name:this.state.name}),this.state.delete&&Object(T.jsx)(ee,{submitted:this.submitted,dm:this.state.campaign.dm,campaignID:this.campaignID}),Object(T.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}return Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{children:"Error: No Campaign"}),Object(T.jsx)("button",{onClick:this.props.back,children:"Go Back"})]})}}]),n}(f.a.Component);function X(e){for(var t=Object(I.useQuery)(_,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,s=t.error;n;)return Object(T.jsx)("p",{children:"loading..."});return s?(console.log(s),Object(T.jsx)("p",{})):(e.return(a.campaign),Object(T.jsx)("p",{children:"done"}))}function Z(e){for(var t=Object(I.useMutation)(A),n=Object(z.a)(t,2),a=n[0],s=n[1],r=s.data,c=s.loading;c;)return Object(T.jsx)("p",{children:"loading"});return void 0===r?a({variables:{id:e.id,name:e.name}}):(console.log(r),e.submitted()),null}function ee(e){for(var t=Object(v.useContext)(D).user,n=Object(I.useMutation)(E),a=Object(z.a)(n,2),s=a[0],r=a[1],c=r.data,i=r.loading;i;)return Object(T.jsx)("p",{children:"Loading..."});return void 0===c?(s({variables:{user:t._id,dm:e.dm,campaign:e.campaignID}}),console.log("attempted deleteCampaign")):null!=c&&(console.log("done",c),e.submitted()),null}var te=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).state={selected:null,chosen:!1,wantsNew:!1,newName:"",newSubmitted:!1,needsRefresh:!1},a.handleEditSubmit=a.handleEditSubmit.bind(Object(k.a)(a)),a.changeSelected=a.changeSelected.bind(Object(k.a)(a)),a.clearSelected=a.clearSelected.bind(Object(k.a)(a)),a.wantsNew=a.wantsNew.bind(Object(k.a)(a)),a.cancelNew=a.cancelNew.bind(Object(k.a)(a)),a.newSubmitted=a.newSubmitted.bind(Object(k.a)(a)),a.newNameChanged=a.newNameChanged.bind(Object(k.a)(a)),a.resetWithNew=a.resetWithNew.bind(Object(k.a)(a)),a.refreshed=a.refreshed.bind(Object(k.a)(a)),a}return Object(y.a)(n,[{key:"handleEditSubmit",value:function(e){e.preventDefault()}},{key:"changeSelected",value:function(e){this.setState({selected:e,chosen:!0})}},{key:"clearSelected",value:function(){this.setState({selected:null,chosen:!1,needsRefresh:!0})}},{key:"newNameChanged",value:function(e){e.preventDefault(),this.setState({newName:e.target.value})}},{key:"wantsNew",value:function(){this.setState({wantsNew:!0})}},{key:"cancelNew",value:function(){this.setState({wantsNew:!1})}},{key:"newSubmitted",value:function(e){e.preventDefault(),this.setState({newSubmitted:!0})}},{key:"resetWithNew",value:function(e){var t=this;this.setState({wantsNew:!1,newSubmitted:!1,newName:""},(function(){t.changeSelected(e)}))}},{key:"refreshed",value:function(){this.setState({needsRefresh:!1})}},{key:"render",value:function(){var e=this.context.user;return Object(T.jsxs)(T.Fragment,{children:[!this.state.chosen&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{className:"title",children:" Campaigns "}),!this.state.wantsNew&&!this.state.newSubmitted&&Object(T.jsx)("button",{onClick:this.wantsNew,children:"+"}),this.state.wantsNew&&!this.state.newSubmitted&&Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("form",{className:"Form",onSubmit:this.newSubmitted,children:[Object(T.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Campaign Name:",Object(T.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:this.newNameChanged})]}),Object(T.jsx)("input",{type:"submit",value:"Submit"}),Object(T.jsx)("button",{onClick:this.cancelNew,children:"x"})]})}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{}),Object(T.jsx)(ne,{needsRefresh:this.state.needsRefresh,refreshed:this.refreshed,changeSelected:this.changeSelected}),this.state.wantsNew&&this.state.newSubmitted&&Object(T.jsx)(se,{dm:e._id,name:this.state.newName,handleAdded:this.resetWithNew})]}),this.state.chosen&&Object(T.jsx)(V,{currentUserID:e._id,campaignID:this.state.selected,submit:this.handleEditSubmit,back:this.clearSelected})]})}}]),n}(f.a.Component);function ne(e){var t=Object(v.useContext)(D),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());var s=[];s.push();for(var r=0;r<n.campaigns.length;r++)s.push(Object(T.jsx)(ae,{campaign:n.campaigns[r],changeSelected:e.changeSelected}));return Object(T.jsxs)(T.Fragment,{children:[0===n.campaigns.length&&Object(T.jsx)("p",{children:"You are not currently participating in any campaigns."}),0!==n.campaigns.length&&s]})}function ae(e){return Object(T.jsxs)("div",{className:"campaign",children:[Object(T.jsx)("p",{className:"campaign-name",children:e.campaign.name},"c1"),Object(T.jsx)("ul",{children:Object(T.jsx)("li",{children:Object(T.jsx)("button",{onClick:function(){return e.changeSelected(e.campaign._id)},children:"Edit"})},"editButton")})]})}function se(e){console.log("adding");for(var t=Object(v.useContext)(D).user,n=Object(I.useMutation)(U),a=Object(z.a)(n,2),s=a[0],r=a[1],c=r.data,i=r.loading;i;)return Object(T.jsx)("p",{children:"Loading..."});return void 0===c?(s({variables:{dm:t._id,name:e.name}}),console.log("attempted addCampaign")):null!=c&&(console.log("done",c),e.handleAdded(c.addCampaign._id)),null}function re(e,t){var n=[];if(void 0!==e[0].index)for(var a=0;a<e.length;a++)e[a].index!==t?n.push(Object(T.jsx)("option",{value:e[a].index,children:e[a].name},a)):n.push(Object(T.jsx)("option",{value:e[a].index,selected:!0,children:e[a].name},a));else if(void 0!==e[0]._id)for(var s=0;s<e.length;s++)e[s].index!==t?n.push(Object(T.jsx)("option",{value:e[s]._id,children:e[s].name},s)):n.push(Object(T.jsx)("option",{value:e[s]._id,selected:!0,children:e[s].name},s));return n}te.contextType=D;var ce=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).user=a.props.currentUser,a.characterID=a.props.characterID,a.returnLoaded=a.returnLoaded.bind(Object(k.a)(a)),a.submittedNew=a.submittedNew.bind(Object(k.a)(a)),a.state={character:null,submitNew:!1,submitGeneral:!1,name:"",race:"",bg:"",campaign:""},a}return Object(y.a)(n,[{key:"returnLoaded",value:function(e){this.setState({character:e})}},{key:"submittedNew",value:function(){this.setState({submitNew:!1,name:"",race:"",bg:"",campaign:""}),this.props.back()}},{key:"render",value:function(){return console.log(this.state.name,this.state.race,this.state.campaign,this.state.bg),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("button",{className:"backButton",onClick:this.props.back,children:"Back"}),Object(T.jsx)(le,{submitNew:this.submitNew,submitGeneral:this.submitGeneral,user:this.user,character:this.state.character,new:null===this.state.character,back:this.props.back}),null!==this.characterID&&null===this.state.character&&Object(T.jsx)(ie,{ID:this.characterID,return:this.returnLoaded})]})}}]),n}(f.a.Component);function ie(e){console.log(e.ID);for(var t=Object(I.useQuery)(P,{variables:{id:e.ID},fetchPolicy:"network-only"}),n=t.loading,a=t.data,s=t.error;n;)return Object(T.jsx)("p",{children:"loading..."});return s?(console.log(s),Object(T.jsx)("p",{})):(console.log(a),e.return(a.character),Object(T.jsx)("p",{children:"done"}))}function le(e){console.log("character info",e.new);var t=Object(I.useQuery)(H),n=t.loading,a=t.data,s=Object(I.useQuery)(W),r=s.loading,c=s.data,i=Object(v.useState)(0),l=Object(z.a)(i,2),d=l[0];for(l[1];r||n;)return Object(T.jsx)("p",{children:"Loading..."});var o=[e.new?Object(T.jsx)(de,{races:a.races,user:e.user,submit:e.submitNew,back:e.back}):Object(T.jsx)(oe,{character:e.character,classes:c.classes,submit:e.submitGeneral,back:e.back})];return o.forEach((function(e){e!==o[d]&&(e=null)})),Object(T.jsx)("div",{children:o})}function de(e){for(var t=Object(v.useContext)(D).user,n=Object(v.useState)(""),a=Object(z.a)(n,2),s=a[0],r=a[1],c=Object(v.useState)(""),i=Object(z.a)(c,2),l=i[0],d=i[1],o=Object(v.useState)(""),u=Object(z.a)(o,2),b=u[0],h=u[1],j=Object(v.useState)(""),m=Object(z.a)(j,2),g=m[0],O=m[1],p=Object(I.useMutation)(B,{variables:{user:t._id,campaign:g,name:s,race:b,background:l}}),x=Object(z.a)(p,2),f=x[0],S=x[1],w=S.loading,C=S.data;w;)return Object(T.jsx)("p",{children:"Loading..."});return void 0!==C&&e.back(),Object(T.jsxs)("form",{onSubmit:f,children:[Object(T.jsx)("input",{type:"submit"}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(T.jsx)("input",{type:"name",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),r(e.target.value)},value:s})]}),Object(T.jsx)(he,{id:"campaign",campaigns:t.campaigns,changeCampaign:O}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"bg",className:"tbLabel",children:["Background Info / Lore:",Object(T.jsx)("textarea",{id:"bg",name:"bg",onChange:function(e){e.preventDefault(),d(e.target.value)},value:l,rows:"4",cols:"50",maxLength:"500"})]}),Object(T.jsx)("br",{}),Object(T.jsx)(be,{id:"race",races:e.races,changeRace:h}),Object(T.jsx)("br",{})]})}function oe(e){var t=Object(v.useContext)(D).user,n=e.character,a=Object(v.useState)(n.campaign),s=Object(z.a)(a,2),r=s[0],c=s[1],i=Object(v.useState)(n.class),l=Object(z.a)(i,2),d=l[0],o=l[1],u=Object(v.useState)(n.str),b=Object(z.a)(u,2),h=b[0],j=b[1],m=Object(v.useState)(n.dex),g=Object(z.a)(m,2),O=g[0],p=g[1],x=Object(v.useState)(n.con),f=Object(z.a)(x,2),S=f[0],w=f[1],C=Object(v.useState)(n.int),N=Object(z.a)(C,2),y=N[0],k=N[1],L=Object(v.useState)(n.wis),$=Object(z.a)(L,2),F=$[0],q=$[1],R=Object(v.useState)(n.cha),_=Object(z.a)(R,2),U=_[0],E=_[1];console.log(d);for(var A=Object(v.useState)(!1),P=Object(z.a)(A,2),B=P[0],W=P[1],H=Object(v.useState)(n.name),J=Object(z.a)(H,2),Y=J[0],K=J[1],V=Object(I.useMutation)(Q,{variables:{character:n._id,user:n.user,campaign:n.campaign}}),X=Object(z.a)(V,2),Z=X[0],ee=X[1],te=ee.loading,ne=ee.data,ae=Object(I.useMutation)(G,{variables:{id:n._id,name:Y,campaign:r}}),se=Object(z.a)(ae,2),re=se[0],ce=se[1],ie=ce.loading,le=ce.data,de=Object(I.useMutation)(M,{variables:{id:n._id,class:d,cha:parseInt(U),con:parseInt(S),str:parseInt(h),dex:parseInt(O),int:parseInt(y),wis:parseInt(F)}}),oe=Object(z.a)(de,2),be=oe[0],je=oe[1],me=je.loading,ge=je.data;te||ie||me;)return te&&console.log(n._id,n.user,n.campaign),Object(T.jsx)("p",{children:"loading"});return void 0===ne&&void 0===le&&void 0===ge||e.back(),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{children:[Object(T.jsx)("h2",{children:n.name}),Object(T.jsx)("button",{onClick:Z,children:"Delete Character"})]}),B?Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("form",{onSubmit:re,children:[Object(T.jsxs)("label",{htmlFor:"name",className:"tbLabel",children:["Name:",Object(T.jsx)("input",{type:"text",id:"name",name:"name",required:!0,onChange:function(e){e.preventDefault(),K(e.target.value)},value:Y})]}),Object(T.jsx)(he,{id:"campaign",current:r,campaigns:t.campaigns,changeCampaign:c}),Object(T.jsx)("input",{type:"submit"}),Object(T.jsx)("button",{onClick:function(){W(!B)},children:"Cancel"})]})}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("button",{onClick:function(){W(!B)},children:"Rename/ChangeCampaign"}),Object(T.jsx)("br",{})]}),Object(T.jsxs)("form",{onSubmit:be,children:[Object(T.jsx)("input",{type:"submit"}),Object(T.jsx)("br",{}),Object(T.jsx)(ue,{id:"class",current:d,classes:e.classes,changeClass:o}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"str",className:"tbLabel",children:["Str:",Object(T.jsx)("input",{type:"number",id:"str",name:"str",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),j(e.target.value)},value:h})]}),Object(T.jsxs)("label",{htmlFor:"dex",className:"tbLabel",children:["Dex:",Object(T.jsx)("input",{type:"number",id:"dex",name:"dex",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),p(e.target.value)},value:O})]}),Object(T.jsxs)("label",{htmlFor:"con",className:"tbLabel",children:["Con:",Object(T.jsx)("input",{type:"number",id:"con",name:"con",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),w(e.target.value)},value:S})]}),Object(T.jsxs)("label",{htmlFor:"int",className:"tbLabel",children:["Int:",Object(T.jsx)("input",{type:"number",id:"int",name:"int",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),k(e.target.value)},value:y})]}),Object(T.jsxs)("label",{htmlFor:"wis",className:"tbLabel",children:["Wis:",Object(T.jsx)("input",{type:"number",id:"wis",name:"wis",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),q(e.target.value)},value:F})]}),Object(T.jsxs)("label",{htmlFor:"cha",className:"tbLabel",children:["Cha:",Object(T.jsx)("input",{type:"number",id:"cha",name:"cha",min:"1",max:"20",required:!0,onChange:function(e){e.preventDefault(),E(e.target.value)},value:U})]})]})]})}function ue(e){var t=re(e.classes,e.current);return Object(T.jsxs)("label",{htmlFor:"class",className:"tbLabel",children:["Class:",Object(T.jsx)("select",{id:"classes",name:"classes",onChange:function(t){e.changeClass(e.classes[t.target.selectedIndex].index)},children:t})]})}function be(e){var t=Object(v.useState)(0),n=Object(z.a)(t,2),a=n[0],s=n[1],r=re(e.races);return Object(T.jsxs)("div",{children:[Object(T.jsxs)("label",{htmlFor:"races",className:"tbLabel",children:["Race:",Object(T.jsx)("select",{id:"races",name:"races",onChange:function(t){e.changeRace(e.races[t.target.selectedIndex].index),s(t.target.selectedIndex)},children:r})]}),Object(T.jsx)("p",{children:e.races[a].alignment})]})}function he(e){var t=re(e.campaigns,e.current);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("label",{htmlFor:"campaigns",className:"tbLabel",children:["Campaign:",Object(T.jsx)("select",{id:"campaigns",name:"campaigns",onChange:function(t){e.changeCampaign(e.campaigns[t.target.selectedIndex]._id)},children:t})]})})}ce.contextType=D;var je=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).state={selected:null,chosen:!1,needsRefresh:!1,needsSubmit:!1},a.handleEditSubmit=a.handleEditSubmit.bind(Object(k.a)(a)),a.changeSelected=a.changeSelected.bind(Object(k.a)(a)),a.clearSelected=a.clearSelected.bind(Object(k.a)(a)),a.wantsNew=a.wantsNew.bind(Object(k.a)(a)),a.refreshed=a.refreshed.bind(Object(k.a)(a)),a}return Object(y.a)(n,[{key:"handleEditSubmit",value:function(e){e.preventDefault()}},{key:"changeSelected",value:function(e){this.setState({selected:e,chosen:!0})}},{key:"clearSelected",value:function(){this.setState({selected:null,chosen:!1,needsRefresh:!0})}},{key:"wantsNew",value:function(){this.setState({chosen:!0})}},{key:"refreshed",value:function(){this.setState({needsRefresh:!1})}},{key:"render",value:function(){var e=this.context.user;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{className:"title",children:" Characters "}),!this.state.chosen&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("button",{onClick:this.wantsNew,children:"New Character"}),Object(T.jsx)(me,{needsRefresh:this.state.needsRefresh,refreshed:this.refreshed,changeSelected:this.changeSelected})]}),this.state.chosen&&Object(T.jsx)(ce,{currentUser:e,characterID:this.state.selected,submit:this.handleEditSubmit,back:this.clearSelected})]})}}]),n}(f.a.Component);function me(e){var t=Object(v.useContext)(D),n=t.user,a=t.refreshUser;e.needsRefresh&&(a(),e.refreshed());for(var s=[],r=0;r<n.characters.length;r++)s.push(Object(T.jsx)(ge,{character:n.characters[r],changeSelected:e.changeSelected}));return Object(T.jsxs)("div",{children:[0===n.characters.length&&Object(T.jsx)("p",{children:"You do not currently have any characters."}),0!==n.campaigns.length&&s]})}function ge(e){return Object(T.jsxs)("div",{className:"character",children:[Object(T.jsx)("p",{className:"characer-name",children:e.character.name},"c1"),Object(T.jsx)("ul",{children:Object(T.jsx)("li",{children:Object(T.jsx)("button",{onClick:function(){return e.changeSelected(e.character._id)},children:"Edit"})},"editButton")})]})}je.contextType=D;var Oe=function(e){return Object(T.jsx)("header",{className:"App-header",children:Object(T.jsxs)(Y.c,{children:[" ",Object(T.jsx)(Y.a,{exact:!0,path:"/",component:K}),Object(T.jsx)(Y.a,{exact:!0,path:"/Campaigns",component:te}),Object(T.jsx)(Y.a,{exact:!0,path:"/Characters",component:je})]})})};function pe(e){var t=Object(I.useQuery)(q,{variables:{username:e.username,password:e.password},notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only"}),n=t.loading,a=t.data,s=t.error,r=t.refetch,c=t.networkStatus;for(console.log("Logged in user",a);c===I.NetworkStatus.refetch;)return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(J,{currentUser:a.user}),Object(T.jsx)("header",{children:Object(T.jsx)("p",{children:"Retrieving your data..."})})]});for(;n;)return Object(T.jsx)("header",{children:Object(T.jsx)("p",{children:"Loading..."})});if(s)return Object(T.jsx)("p",{children:"There was an error. Please refresh the page and try again."});if(null!=a){var i={user:a.user,refreshUser:r};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(J,{currentUser:a.user}),Object(T.jsx)(D.Provider,{value:i,children:Object(T.jsx)(Oe,{})})]})}return e.BadLogin(),Object(T.jsx)("p",{children:"Error: User not found"})}function xe(e){for(var t=Object(I.useQuery)(q,{variables:{username:e.username,password:e.passsword}}),n=t.data,a=t.loading,s=Object(I.useMutation)(R),r=Object(z.a)(s,2),c=r[0],i=r[1],l=i.data,d=i.loading;a;)return Object(T.jsx)("p",{children:"Checking for existing user..."});if(null===n.user){for(console.log("user doesn't already exist");d;)return Object(T.jsx)("p",{children:"Loading..."});if(void 0===l)console.log("adding user"),c({variables:{name:e.name,email:e.email,username:e.username,password:e.password}});else if(null!=l)return console.log(l),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("p",{children:["Welcome, ",e.name]}),Object(T.jsx)(C.b,{to:"",children:"Go to Log In"})]})}if(null!==n)return console.log("user already exists",n,l),Object(T.jsx)("p",{children:"Error: User already exists, try again"})}var ve=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).Registered=a.props.Registered,a.handleNameChange=a.handleNameChange.bind(Object(k.a)(a)),a.handleEmailChange=a.handleEmailChange.bind(Object(k.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(k.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(k.a)(a)),a.handleRegisterAttempt=a.handleRegisterAttempt.bind(Object(k.a)(a)),a.state={badForm:!1,registered:!1,name:"",email:"",username:"",password:""},a}return Object(y.a)(n,[{key:"handleNameChange",value:function(e){e.preventDefault(),this.setState({name:e.target.value})}},{key:"handleEmailChange",value:function(e){e.preventDefault(),this.setState({email:e.target.value})}},{key:"handleUsernameChange",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleRegisterAttempt",value:function(e){e.preventDefault(),this.state.name&&this.state.email&&this.state.username&&this.state.password?this.setState({registered:!0}):this.setState({badForm:!0})}},{key:"render",value:function(){return Object(T.jsxs)(T.Fragment,{children:[!this.state.registered&&Object(T.jsxs)("div",{children:[Object(T.jsx)("img",{src:"images/Nooth_DnD.png",width:"300",alt:"logo"}),Object(T.jsx)("h1",{className:"title",children:"Sign Up"}),Object(T.jsxs)("form",{className:"Form",onSubmit:this.handleRegisterAttempt,children:[Object(T.jsxs)("label",{htmlFor:"fullname",className:"tbLabel",children:["Full Name:",Object(T.jsx)("input",{type:"name",id:"fullname",name:"fullname",required:!0,onChange:this.handleNameChange,value:this.state.name})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"email",className:"tbLabel",name:"tbLabel",children:["Email:",Object(T.jsx)("input",{type:"email",id:"email",name:"email",required:!0,onChange:this.handleEmailChange,value:this.state.email})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"username",className:"tbLabel",name:"tbLabel",children:["Username:",Object(T.jsx)("input",{type:"username",id:"username",name:"username",required:!0,onChange:this.handleUsernameChange,value:this.state.username})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"password",className:"tbLabel",name:"tbLabel",children:["Password:",Object(T.jsx)("input",{type:"password",id:"password",name:"password",required:!0,onChange:this.handlePasswordChange,value:this.state.password})]}),Object(T.jsx)("br",{}),Object(T.jsx)("input",{type:"submit",value:"Submit"})]}),Object(T.jsx)("br",{})]}),this.state.registered&&Object(T.jsx)(xe,{name:this.state.name,email:this.state.email,username:this.state.username,password:this.state.password}),this.state.badForm&&Object(T.jsx)("p",{children:"Please make sure all boxes are filled in"}),Object(T.jsx)("button",{onClick:this.Registered,name:"next",variant:"outlined",children:"Go back to login"})]})}}]),n}(f.a.Component),fe=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).HandleLogin=a.props.HandleLogin,a.SetLogin=a.props.SetLogin,a.BadLogin=a.props.BadLogin,a.Registered=a.Registered.bind(Object(k.a)(a)),a.NotRegistered=a.NotRegistered.bind(Object(k.a)(a)),a.handleLoginAttempt=a.handleLoginAttempt.bind(Object(k.a)(a)),a.handleUsernameChange=a.handleUsernameChange.bind(Object(k.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(k.a)(a)),a.state={registered:!0,loggedIn:!1,username:"",password:""},a}return Object(y.a)(n,[{key:"handleUsernameChange",value:function(e){e.preventDefault(),this.setState({username:e.target.value})}},{key:"handlePasswordChange",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleLoginAttempt",value:function(e){e.preventDefault(),this.HandleLogin(this.state.username,this.state.password),this.setState({loggedIn:!0}),this.SetLogin()}},{key:"NotRegistered",value:function(){this.setState({registered:!1})}},{key:"Registered",value:function(){this.setState({registered:!0})}},{key:"render",value:function(){return Object(T.jsxs)("header",{className:"App-header",children:[!this.state.loggedIn&&this.state.registered&&Object(T.jsxs)("div",{children:[Object(T.jsxs)("form",{id:"Form",className:"Form",onSubmit:this.handleLoginAttempt,children:[Object(T.jsx)("p",{children:" Please enter your username and password "}),Object(T.jsxs)("label",{htmlFor:"user",children:["Username:",Object(T.jsx)("input",{type:"username",name:"user",id:"user",required:!0,autoFocus:!0,onChange:this.handleUsernameChange,value:this.state.username})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{htmlFor:"pass",children:["Password:",Object(T.jsx)("input",{type:"password",name:"pass",id:"pass",required:!0,onChange:this.handlePasswordChange,value:this.state.password})]}),Object(T.jsx)("br",{}),Object(T.jsx)("input",{type:"submit",value:"Submit",variant:"outlined"}),Object(T.jsxs)("label",{htmlFor:"rememberLogin",children:[" Remember me",Object(T.jsx)("input",{type:"checkbox",id:"rememberLogin",name:"rememberLogin",value:this.state.loggedIn})]})]}),Object(T.jsx)("button",{name:"next2",variant:"outlined",onClick:this.NotRegistered,children:"register"}),this.BadLogin&&Object(T.jsx)("p",{children:"Could not find a user to match input username and password."})]}),!this.state.registered&&!this.state.loggedIn&&Object(T.jsx)(ve,{Registered:this.Registered})]})}}]),n}(f.a.Component),Se=function(e){Object(L.a)(n,e);var t=Object($.a)(n);function n(e){var a;return Object(N.a)(this,n),(a=t.call(this,e)).LoginUser=a.LoginUser.bind(Object(k.a)(a)),a.SetLoggedIn=a.SetLoggedIn.bind(Object(k.a)(a)),a.InvalidLogin=a.InvalidLogin.bind(Object(k.a)(a)),a.GoodLogin=a.GoodLogin.bind(Object(k.a)(a)),a.state={username:"",password:"",id:"",loginError:!1,isLoggedIn:!1},a}return Object(y.a)(n,[{key:"LoginUser",value:function(e,t){var n=this;this.setState({username:e,password:t},(function(){console.log(n.state.username,n.state.password)}))}},{key:"SetLoggedIn",value:function(){this.setState({isLoggedIn:!0,loginError:!1},(function(){console.log("logged in")}))}},{key:"InvalidLogin",value:function(){this.setState({loginError:!0,isLoggedIn:!1},(function(){console.log("logged out due to error")}))}},{key:"GoodLogin",value:function(e){var t=this;this.setState({password:"",id:e,isLoggedIn:!1},(function(){t.SetLoggedIn()}))}},{key:"render",value:function(){return Object(T.jsxs)("div",{className:"App",children:[!this.state.isLoggedIn&&Object(T.jsx)(fe,{BadAttempt:this.state.loginError,HandleLogin:this.LoginUser,SetLogin:this.SetLoggedIn}),this.state.isLoggedIn&&Object(T.jsx)(pe,{username:this.state.username,password:this.state.password,id:this.state.id,BadLogin:this.InvalidLogin,GoodLogin:this.GoodLogin})]})}}]),n}(f.a.Component),we=new I.ApolloClient({uri:"/graphql",cache:new I.InMemoryCache,onError:function(e){var t=e.networkError,n=e.graphQLErrors;console.log("graphQLErrors",n),console.log("networkError",t)}});w.a.render(Object(T.jsx)(I.ApolloProvider,{client:we,children:Object(T.jsxs)(C.a,{children:[Object(T.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),Object(T.jsx)(Se,{})]})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.963737e4.chunk.js.map